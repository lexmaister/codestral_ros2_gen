{"attempt_time":115.8959755898,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1185,"total_tokens":4534,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.62s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2491759, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2491822, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2491884, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-136\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2492083, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-136\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2492247, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7d3e24942d10>\nnetwork_scanner_node = psutil.Process(pid=2492247, name='python3', status='sleeping', started='11:53:18')\nnetwork_status_client = (<rclpy.node.Node object at 0x7d3e231a5990>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743324800, nanosec=730211526), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7d3e231a5990>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743324800, nanosec=730211526), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.06s (0:01:21)\n\nstderr:\nProcess 2491759 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2491822 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2491884 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2492040 no longer exists\nProcess 2492083 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2492247 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":1,"attempt":1}
{"attempt_time":98.886515379,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1177,"total_tokens":4526,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2492611, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2492651, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2492740, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-137\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2492989, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-137\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2493160, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x78bf2a048580>\nnetwork_scanner_node = psutil.Process(pid=2493160, name='python3', status='sleeping', started='11:54:52')\nnetwork_status_client = (<rclpy.node.Node object at 0x78bf28976020>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.02s (0:01:25)\n\nstderr:\nProcess 2492611 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2492651 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2492740 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2492946 no longer exists\nProcess 2492989 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2493160 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":1,"attempt":2}
{"attempt_time":119.8272500038,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1185,"total_tokens":4534,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.61s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2493614, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2493660, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2493727, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-138\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2493906, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-138\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2494054, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7d75bb046d10>\nnetwork_scanner_node = psutil.Process(pid=2494054, name='python3', status='sleeping', started='11:56:52')\nnetwork_status_client = (<rclpy.node.Node object at 0x7d75bb0448b0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.07s (0:01:25)\n\nstderr:\nProcess 2493614 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2493660 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2493727 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2493868 no longer exists\nProcess 2493906 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2494054 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":1,"attempt":3}
{"attempt_time":94.9652030468,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1137,"total_tokens":4486,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2494352, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2494393, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2494509, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-139\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2494674, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-139\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2494790, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7528a03e4e80>\nnetwork_scanner_node = psutil.Process(pid=2494790, name='python3', status='sleeping', started='11:58:27')\nnetwork_status_client = (<rclpy.node.Node object at 0x75289f699a50>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.05s (0:01:25)\n\nstderr:\nProcess 2494352 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2494393 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2494509 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2494614 no longer exists\nProcess 2494674 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2494790 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":1,"attempt":4}
{"attempt_time":121.0222914219,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1150,"total_tokens":4499,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.56s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2495239, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2495280, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2495396, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-140\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2495556, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-140\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2495673, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7e31e2a44670>\nnetwork_scanner_node = psutil.Process(pid=2495673, name='python3', status='sleeping', started='12:00:28')\nnetwork_status_client = (<rclpy.node.Node object at 0x7e31e1af9f30>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.38s (0:01:25)\n\nstderr:\nProcess 2495239 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2495280 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2495396 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2495493 no longer exists\nProcess 2495556 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2495673 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":1,"attempt":5}
{"attempt_time":117.0351419449,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1135,"total_tokens":4484,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.56s]\n\nSummary: 1 package finished [0.71s]\n.Child process PID: 2496123, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2496164, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2496282, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-141\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2496437, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-141\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2496559, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x70f7bdf42d10>\nnetwork_scanner_node = psutil.Process(pid=2496559, name='python3', status='sleeping', started='12:02:29')\nnetwork_status_client = (<rclpy.node.Node object at 0x70f7bdf40850>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743325352, nanosec=554268476), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x70f7bdf40850>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743325352, nanosec=554268476), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.01s (0:01:21)\n\nstderr:\nProcess 2496123 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2496164 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2496282 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2496378 no longer exists\nProcess 2496437 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2496559 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":1,"attempt":6}
{"attempt_time":99.0181136131,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1173,"total_tokens":4522,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.56s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2496873, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2496907, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2497046, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-142\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2497209, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-142\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2497302, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7e9cb303b310>\nnetwork_scanner_node = psutil.Process(pid=2497302, name='python3', status='sleeping', started='12:04:04')\nnetwork_status_client = (<rclpy.node.Node object at 0x7e9cb1956050>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2496873 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2496907 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2497046 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2497117 no longer exists\nProcess 2497209 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2497302 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":1,"attempt":7}
{"attempt_time":130.2906725407,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1185,"total_tokens":4534,"error":null,"iteration":1,"attempt":8}
{"attempt_time":37.5098462105,"success":false,"final_state":"TEST","tests_passed":1,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1080,"total_tokens":4429,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.73s]\n.E\n==================================== ERRORS ====================================\n_________________ ERROR at setup of TestFull.test_node_running _________________\n\nrequest = <SubRequest 'network_scanner_node' for <Function test_node_running>>\ntmp_path = PosixPath('\/tmp\/pytest-of-aleev\/pytest-144\/test_node_running0')\nmonkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x798b80146ef0>\n\n    @pytest.fixture(scope=\"function\")\n    def network_scanner_node(request, tmp_path, monkeypatch):\n        \"\"\"Fixture that sets up a network scanner node with the provided parameters.\"\"\"\n        if not rclpy.ok():\n            rclpy.init()\n    \n        # Default parameters\n        network = \"4.2.2.2\"\n        scan_period = 3\n        mock_nscan = False\n        mock_nscan_text = \"\"\"#!\/bin\/bash\n        echo \"NSCAN\"\n        \"\"\"\n        if hasattr(request, \"param\"):\n            params = request.param\n            network = params.get(\"network\", network)\n            scan_period = params.get(\"scan_period\", scan_period)\n            mock_nscan = params.get(\"mock_nscan\", mock_nscan)\n            mock_nscan_text = params.get(\"mock_nscan_text\", mock_nscan_text)\n    \n        if mock_nscan:\n            print(\"Using mock nscan binary\")\n            nscan_path = os.path.join(tmp_path, \"nscan\")\n            with open(nscan_path, \"w\") as f:\n                f.write(mock_nscan_text)\n            os.chmod(nscan_path, 0o755)\n    \n            monkeypatch.setenv(\"PATH\", f\"{tmp_path}:{os.environ.get('PATH')}\")\n            print(f\"nscan path: {nscan_path}\")\n    \n        runner = ros2_runner.ROS2Runner(\n            node_command=f\"ros2 run network_scanner scanner_node --ros-args -p network:={network!r} -p scan_period:={scan_period}\",\n            test_command=\"\",\n        )\n>       runner.start_node()\n\nsrc\/network_scanner\/test\/test_scanner_node.py:46: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <codestral_ros2_gen.utils.ros2_runner.ROS2Runner object at 0x798b80146980>\n\n    def start_node(self) -> None:\n        \"\"\"\n        Start the ROS2 node and verify it launched successfully.\n    \n        If \"skip \/ SKIP\" is found in the node_command, the node is not started.\n    \n        Raises:\n            RuntimeError: If the node fails to start or register with ROS2.\n        \"\"\"\n        logger.info(\"Starting the ROS2 node...\")\n        if \"skip\" in self.node_command.lower():\n            logger.info(\"Skipping node start as requested.\")\n            return\n        else:\n            self.node_process = subprocess.Popen(\n                self.node_command,\n                shell=True,\n                executable=\"\/bin\/bash\",\n                stderr=subprocess.PIPE,\n                stdout=subprocess.PIPE,\n                text=True,\n            )\n    \n            # Wait briefly for node to initialize\n            time.sleep(2)\n    \n            # Check if process is still running\n            if self.node_process.poll() is not None:\n                # Process terminated - get error output\n                stdout, stderr = self.node_process.communicate()\n                error_msg = f\"Node process terminated immediately.\\nStdout: {stdout}\\nStderr: {stderr}\"\n>               raise RuntimeError(error_msg)\nE               RuntimeError: Node process terminated immediately.\nE               Stdout: [ros2run]: Process exited with failure 1\nE               \nE               Stderr: Traceback (most recent call last):\nE                 File \"\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node\", line 116, in <module>\nE                   main()\nE                 File \"\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node\", line 109, in main\nE                   node = NetworkScannerNode()\nE                 File \"\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node\", line 39, in __init__\nE                   qos_profile = QoSProfile(\nE                 File \"\/opt\/ros\/humble\/local\/lib\/python3.10\/dist-packages\/rclpy\/qos.py\", line 82, in __init__\nE                   raise InvalidQoSProfileException('History and\/or depth settings are required.')\nE               rclpy.qos.InvalidQoSProfileException: ('Invalid QoSProfile', 'History and\/or depth settings are required.')\n\n..\/codestral_ros2_gen\/src\/codestral_ros2_gen\/utils\/ros2_runner.py:79: RuntimeError\n=========================== short test summary info ============================\nERROR src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_node_running\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 passed, 1 error in 3.59s\n\nstderr:\n","iteration":2,"attempt":1}
{"attempt_time":37.8532397747,"success":false,"final_state":"TEST","tests_passed":1,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1137,"total_tokens":4486,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.73s]\n.E\n==================================== ERRORS ====================================\n_________________ ERROR at setup of TestFull.test_node_running _________________\n\nrequest = <SubRequest 'network_scanner_node' for <Function test_node_running>>\ntmp_path = PosixPath('\/tmp\/pytest-of-aleev\/pytest-145\/test_node_running0')\nmonkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x72c8e1246ef0>\n\n    @pytest.fixture(scope=\"function\")\n    def network_scanner_node(request, tmp_path, monkeypatch):\n        \"\"\"Fixture that sets up a network scanner node with the provided parameters.\"\"\"\n        if not rclpy.ok():\n            rclpy.init()\n    \n        # Default parameters\n        network = \"4.2.2.2\"\n        scan_period = 3\n        mock_nscan = False\n        mock_nscan_text = \"\"\"#!\/bin\/bash\n        echo \"NSCAN\"\n        \"\"\"\n        if hasattr(request, \"param\"):\n            params = request.param\n            network = params.get(\"network\", network)\n            scan_period = params.get(\"scan_period\", scan_period)\n            mock_nscan = params.get(\"mock_nscan\", mock_nscan)\n            mock_nscan_text = params.get(\"mock_nscan_text\", mock_nscan_text)\n    \n        if mock_nscan:\n            print(\"Using mock nscan binary\")\n            nscan_path = os.path.join(tmp_path, \"nscan\")\n            with open(nscan_path, \"w\") as f:\n                f.write(mock_nscan_text)\n            os.chmod(nscan_path, 0o755)\n    \n            monkeypatch.setenv(\"PATH\", f\"{tmp_path}:{os.environ.get('PATH')}\")\n            print(f\"nscan path: {nscan_path}\")\n    \n        runner = ros2_runner.ROS2Runner(\n            node_command=f\"ros2 run network_scanner scanner_node --ros-args -p network:={network!r} -p scan_period:={scan_period}\",\n            test_command=\"\",\n        )\n>       runner.start_node()\n\nsrc\/network_scanner\/test\/test_scanner_node.py:46: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <codestral_ros2_gen.utils.ros2_runner.ROS2Runner object at 0x72c8e1246980>\n\n    def start_node(self) -> None:\n        \"\"\"\n        Start the ROS2 node and verify it launched successfully.\n    \n        If \"skip \/ SKIP\" is found in the node_command, the node is not started.\n    \n        Raises:\n            RuntimeError: If the node fails to start or register with ROS2.\n        \"\"\"\n        logger.info(\"Starting the ROS2 node...\")\n        if \"skip\" in self.node_command.lower():\n            logger.info(\"Skipping node start as requested.\")\n            return\n        else:\n            self.node_process = subprocess.Popen(\n                self.node_command,\n                shell=True,\n                executable=\"\/bin\/bash\",\n                stderr=subprocess.PIPE,\n                stdout=subprocess.PIPE,\n                text=True,\n            )\n    \n            # Wait briefly for node to initialize\n            time.sleep(2)\n    \n            # Check if process is still running\n            if self.node_process.poll() is not None:\n                # Process terminated - get error output\n                stdout, stderr = self.node_process.communicate()\n                error_msg = f\"Node process terminated immediately.\\nStdout: {stdout}\\nStderr: {stderr}\"\n>               raise RuntimeError(error_msg)\nE               RuntimeError: Node process terminated immediately.\nE               Stdout: [ros2run]: Process exited with failure 1\nE               \nE               Stderr: Traceback (most recent call last):\nE                 File \"\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node\", line 7, in <module>\nE                   from rclpy.exceptions import ParameterNotDeclaredException, ParameterValueException\nE               ImportError: cannot import name 'ParameterValueException' from 'rclpy.exceptions' (\/opt\/ros\/humble\/local\/lib\/python3.10\/dist-packages\/rclpy\/exceptions.py)\n\n..\/codestral_ros2_gen\/src\/codestral_ros2_gen\/utils\/ros2_runner.py:79: RuntimeError\n=========================== short test summary info ============================\nERROR src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_node_running\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 passed, 1 error in 3.59s\n\nstderr:\n","iteration":2,"attempt":2}
{"attempt_time":120.1255912781,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1220,"total_tokens":4569,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2499421, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2499460, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2499524, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-146\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2499774, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-146\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2499921, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7b3bf32431f0>\nnetwork_scanner_node = psutil.Process(pid=2499921, name='python3', status='sleeping', started='12:09:30')\nnetwork_status_client = (<rclpy.node.Node object at 0x7b3bf22f5960>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.09s (0:01:25)\n\nstderr:\nProcess 2499421 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2499460 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2499524 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2499735 no longer exists\nProcess 2499774 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2499921 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":2,"attempt":3}
{"attempt_time":119.6230354309,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1166,"total_tokens":4515,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2500360, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2500411, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2500469, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-147\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2500656, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-147\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2500804, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7bbaaaa3ee30>\nnetwork_scanner_node = psutil.Process(pid=2500804, name='python3', status='sleeping', started='12:11:30')\nnetwork_status_client = (<rclpy.node.Node object at 0x7bbaa9ab5d80>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.05s (0:01:25)\n\nstderr:\nProcess 2500360 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2500411 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2500469 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2500618 no longer exists\nProcess 2500656 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2500804 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":2,"attempt":4}
{"attempt_time":94.9928045273,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1129,"total_tokens":4478,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2501104, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2501145, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2501262, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-148\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2501420, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-148\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2501542, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x70971be42d10>\nnetwork_scanner_node = psutil.Process(pid=2501542, name='python3', status='sleeping', started='12:13:05')\nnetwork_status_client = (<rclpy.node.Node object at 0x70971be40640>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.08s (0:01:25)\n\nstderr:\nProcess 2501104 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2501145 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2501262 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2501359 no longer exists\nProcess 2501420 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2501542 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":2,"attempt":5}
{"attempt_time":119.6381087303,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1178,"total_tokens":4527,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.56s]\n\nSummary: 1 package finished [0.71s]\n.Child process PID: 2501991, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2502031, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2502116, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-149\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2502281, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-149\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2502428, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x78ab74e40580>\nnetwork_scanner_node = psutil.Process(pid=2502428, name='python3', status='sleeping', started='12:15:04')\nnetwork_status_client = (<rclpy.node.Node object at 0x78ab74e40c70>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.08s (0:01:25)\n\nstderr:\nProcess 2501991 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2502031 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2502116 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2502241 no longer exists\nProcess 2502281 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2502428 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":2,"attempt":6}
{"attempt_time":90.9551246166,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1141,"total_tokens":4490,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2502729, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2502768, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2502886, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-150\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2503063, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-150\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2503162, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7e56feb3c580>\nnetwork_scanner_node = psutil.Process(pid=2503162, name='python3', status='sleeping', started='12:16:39')\nnetwork_status_client = (<rclpy.node.Node object at 0x7e56feb3e950>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743326202, nanosec=642243491), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7e56feb3e950>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743326202, nanosec=642243491), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.07s (0:01:21)\n\nstderr:\nProcess 2502729 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2502768 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2502886 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2502978 no longer exists\nProcess 2503063 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2503162 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":2,"attempt":7}
{"attempt_time":119.5711212158,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1153,"total_tokens":4502,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2503598, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2503646, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2503708, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-151\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2503894, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-151\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2504042, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7de1c563c580>\nnetwork_scanner_node = psutil.Process(pid=2504042, name='python3', status='sleeping', started='12:18:35')\nnetwork_status_client = (<rclpy.node.Node object at 0x7de1c563f0a0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.05s (0:01:25)\n\nstderr:\nProcess 2503598 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2503646 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2503708 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2503857 no longer exists\nProcess 2503894 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2504042 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":2,"attempt":8}
{"attempt_time":3.3189053535,"success":false,"final_state":"PARSE","tests_passed":0,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":497,"total_tokens":3846,"error":"Parsing failed, no code returned.","iteration":2,"attempt":9}
{"attempt_time":119.5497846603,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1182,"total_tokens":4531,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2504496, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2504537, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2504621, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-152\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2504784, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-152\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2504931, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7da634345030>\nnetwork_scanner_node = psutil.Process(pid=2504931, name='python3', status='sleeping', started='12:20:38')\nnetwork_status_client = (<rclpy.node.Node object at 0x7da634347400>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2504496 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2504537 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2504621 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2504746 no longer exists\nProcess 2504784 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2504931 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":2,"attempt":10}
{"attempt_time":105.6402609348,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1179,"total_tokens":4528,"error":null,"iteration":2,"attempt":11}
{"attempt_time":130.3759868145,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1199,"total_tokens":4548,"error":null,"iteration":3,"attempt":1}
{"attempt_time":119.5656552315,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1186,"total_tokens":4535,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.61s]\n\nSummary: 1 package finished [0.78s]\n.Child process PID: 2507130, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2507221, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2507286, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-155\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2507474, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-155\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2507613, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x763a0e744640>\nnetwork_scanner_node = psutil.Process(pid=2507613, name='python3', status='sleeping', started='12:26:34')\nnetwork_status_client = (<rclpy.node.Node object at 0x763a0e745120>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.02s (0:01:25)\n\nstderr:\nProcess 2507130 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2507221 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2507286 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2507434 no longer exists\nProcess 2507474 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2507613 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":4,"attempt":1}
{"attempt_time":95.0021576881,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1162,"total_tokens":4511,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.78s]\n.Child process PID: 2507895, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2507960, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2508018, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-156\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2508215, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-156\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2508357, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7cd24b93b310>\nnetwork_scanner_node = psutil.Process(pid=2508357, name='python3', status='sleeping', started='12:28:09')\nnetwork_status_client = (<rclpy.node.Node object at 0x7cd24a1a1930>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.07s (0:01:25)\n\nstderr:\nProcess 2507895 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2507960 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2508018 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2508173 no longer exists\nProcess 2508215 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2508357 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":4,"attempt":2}
{"attempt_time":112.6844818592,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1181,"total_tokens":4530,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2508782, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2508847, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2508905, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-157\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2509095, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-157\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2509260, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7b24b9f4ad10>\nnetwork_scanner_node = psutil.Process(pid=2509260, name='python3', status='sleeping', started='12:30:08')\nnetwork_status_client = (<rclpy.node.Node object at 0x7b24b9f48dc0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743327011, nanosec=484523281), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7b24b9f48dc0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743327011, nanosec=484523281), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.98s (0:01:17)\n\nstderr:\nProcess 2508782 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2508847 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2508905 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2509057 no longer exists\nProcess 2509095 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":4,"attempt":3}
{"attempt_time":112.4543612003,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1248,"total_tokens":4597,"error":null,"iteration":4,"attempt":4}
{"attempt_time":120.4784619808,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1150,"total_tokens":4499,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2510517, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2510551, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2510681, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-159\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2510851, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-159\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2510945, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7f5b926e2d10>\nnetwork_scanner_node = psutil.Process(pid=2510945, name='python3', status='sleeping', started='12:33:54')\nnetwork_status_client = (<rclpy.node.Node object at 0x7f5b926e0a00>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2510517 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2510551 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2510681 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2510759 no longer exists\nProcess 2510851 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2510945 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":5,"attempt":1}
{"attempt_time":103.7468357086,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1166,"total_tokens":4515,"error":null,"iteration":5,"attempt":2}
{"attempt_time":119.5994467735,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1185,"total_tokens":4534,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2512177, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2512268, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2512354, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-161\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2512547, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-161\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2512663, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7d6a64242d10>\nnetwork_scanner_node = psutil.Process(pid=2512663, name='python3', status='sleeping', started='12:37:38')\nnetwork_status_client = (<rclpy.node.Node object at 0x7d6a62b6d7b0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2512177 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2512268 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2512354 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2512501 no longer exists\nProcess 2512547 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2512663 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":6,"attempt":1}
{"attempt_time":94.9941453934,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1193,"total_tokens":4542,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.78s]\n.Child process PID: 2512918, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2513031, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2513097, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-162\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2513284, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-162\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2513492, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7089f9b3c580>\nnetwork_scanner_node = psutil.Process(pid=2513492, name='python3', status='sleeping', started='12:39:13')\nnetwork_status_client = (<rclpy.node.Node object at 0x7089f839d840>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.06s (0:01:25)\n\nstderr:\nProcess 2512918 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2513031 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2513097 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2513245 no longer exists\nProcess 2513284 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2513492 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":6,"attempt":2}
{"attempt_time":119.4352281094,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1129,"total_tokens":4478,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2513868, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2513976, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2514047, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-163\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2514232, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-163\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2514368, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x719b7f346d10>\nnetwork_scanner_node = psutil.Process(pid=2514368, name='python3', status='sleeping', started='12:41:12')\nnetwork_status_client = (<rclpy.node.Node object at 0x719b7dba5ff0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.01s (0:01:25)\n\nstderr:\nProcess 2513868 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2513976 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2514047 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2514192 no longer exists\nProcess 2514232 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2514368 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":6,"attempt":3}
{"attempt_time":105.4803924561,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1109,"total_tokens":4458,"error":null,"iteration":6,"attempt":4}
{"attempt_time":115.7357895374,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1125,"total_tokens":4474,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2515613, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2515656, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2515768, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-165\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2515930, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-165\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2516048, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7b7a853e8640>\nnetwork_scanner_node = psutil.Process(pid=2516048, name='python3', status='sleeping', started='12:44:57')\nnetwork_status_client = (<rclpy.node.Node object at 0x7b7a844b1930>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743327900, nanosec=118088249), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7b7a844b1930>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743327900, nanosec=118088249), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.36s (0:01:21)\n\nstderr:\nProcess 2515613 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2515656 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2515768 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2515869 no longer exists\nProcess 2515930 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2516048 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":7,"attempt":1}
{"attempt_time":3.3191666603,"success":false,"final_state":"PARSE","tests_passed":0,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":500,"total_tokens":3849,"error":"Parsing failed, no code returned.","iteration":7,"attempt":2}
{"attempt_time":88.1825456619,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1219,"total_tokens":4568,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.54s]\n\nSummary: 1 package finished [0.72s]\n.Child process PID: 2516361, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2516398, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2516532, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-166\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2516701, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-166\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2516792, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x780f9c2e2d10>\nnetwork_scanner_node = psutil.Process(pid=2516792, name='python3', status='sleeping', started='12:46:32')\nnetwork_status_client = (<rclpy.node.Node object at 0x780f9aba1930>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743327995, nanosec=58963687), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x780f9aba1930>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743327995, nanosec=58963687), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.92s (0:01:17)\n\nstderr:\nProcess 2516361 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2516398 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2516532 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2516604 no longer exists\nProcess 2516701 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":7,"attempt":3}
{"attempt_time":120.0207154751,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1166,"total_tokens":4515,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2517216, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2517264, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2517321, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-167\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2517514, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-167\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2517662, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7ba2a7342d10>\nnetwork_scanner_node = psutil.Process(pid=2517662, name='python3', status='sleeping', started='12:48:25')\nnetwork_status_client = (<rclpy.node.Node object at 0x7ba2a7340970>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.43s (0:01:25)\n\nstderr:\nProcess 2517216 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2517264 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2517321 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2517476 no longer exists\nProcess 2517514 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2517662 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":7,"attempt":4}
{"attempt_time":94.6384358406,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1177,"total_tokens":4526,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2517956, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2517999, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2518110, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-168\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2518274, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-168\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2518392, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x711122fe4580>\nnetwork_scanner_node = psutil.Process(pid=2518392, name='python3', status='sleeping', started='12:49:59')\nnetwork_status_client = (<rclpy.node.Node object at 0x7111220b1840>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.08s (0:01:25)\n\nstderr:\nProcess 2517956 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2517999 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2518110 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2518212 no longer exists\nProcess 2518274 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2518392 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":7,"attempt":5}
{"attempt_time":129.9847843647,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1150,"total_tokens":4499,"error":null,"iteration":7,"attempt":6}
{"attempt_time":119.6753041744,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1146,"total_tokens":4495,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.56s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2519783, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2519818, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2519952, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-170\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2520143, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-170\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2520211, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x786ee6f46d10>\nnetwork_scanner_node = psutil.Process(pid=2520211, name='python3', status='sleeping', started='12:54:09')\nnetwork_status_client = (<rclpy.node.Node object at 0x786ee57a5ed0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.11s (0:01:25)\n\nstderr:\nProcess 2519783 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2519818 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2519952 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2520055 no longer exists\nProcess 2520143 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2520211 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":8,"attempt":1}
{"attempt_time":120.0599694252,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1199,"total_tokens":4548,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.56s]\n\nSummary: 1 package finished [0.72s]\n.Child process PID: 2520662, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2520705, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2520839, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-171\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2521027, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-171\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2521097, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7fab9fbe4670>\nnetwork_scanner_node = psutil.Process(pid=2521097, name='python3', status='sleeping', started='12:56:09')\nnetwork_status_client = (<rclpy.node.Node object at 0x7fab9ecb19c0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.03s (0:01:25)\n\nstderr:\nProcess 2520662 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2520705 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2520839 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2520924 no longer exists\nProcess 2521027 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2521097 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":8,"attempt":2}
{"attempt_time":94.9952397346,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1165,"total_tokens":4514,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2521403, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2521467, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2521578, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-172\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2521767, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-172\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2521864, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x78e07dc44f40>\nnetwork_scanner_node = psutil.Process(pid=2521864, name='python3', status='sleeping', started='12:57:44')\nnetwork_status_client = (<rclpy.node.Node object at 0x78e07cd0dba0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.05s (0:01:25)\n\nstderr:\nProcess 2521403 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2521467 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2521578 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2521703 no longer exists\nProcess 2521767 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2521864 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":8,"attempt":3}
{"attempt_time":119.2805967331,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1097,"total_tokens":4446,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2522285, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2522322, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2522457, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-173\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2522645, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-173\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2522715, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x792e8733f310>\nnetwork_scanner_node = psutil.Process(pid=2522715, name='python3', status='sleeping', started='12:59:44')\nnetwork_status_client = (<rclpy.node.Node object at 0x792e85ba99c0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.05s (0:01:25)\n\nstderr:\nProcess 2522285 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2522322 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2522457 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2522559 no longer exists\nProcess 2522645 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2522715 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":8,"attempt":4}
{"attempt_time":94.9188828468,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1205,"total_tokens":4554,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.55s]\n\nSummary: 1 package finished [0.71s]\n.Child process PID: 2523021, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2523060, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2523194, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-174\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2523378, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-174\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2523448, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x73f705e4ad10>\nnetwork_scanner_node = psutil.Process(pid=2523448, name='python3', status='sleeping', started='13:01:18')\nnetwork_status_client = (<rclpy.node.Node object at 0x73f704ee5f30>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.06s (0:01:25)\n\nstderr:\nProcess 2523021 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2523060 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2523194 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2523303 no longer exists\nProcess 2523378 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2523448 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":8,"attempt":5}
{"attempt_time":119.7580528259,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1225,"total_tokens":4574,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2523898, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2523937, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2524071, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-175\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2524266, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-175\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2524338, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x70ae88cdc670>\nnetwork_scanner_node = psutil.Process(pid=2524338, name='python3', status='sleeping', started='13:03:18')\nnetwork_status_client = (<rclpy.node.Node object at 0x70ae875a59c0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2523898 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2523937 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2524071 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2524178 no longer exists\nProcess 2524266 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2524338 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":8,"attempt":6}
{"attempt_time":95.0359477997,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1185,"total_tokens":4534,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.61s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2524637, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2524706, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2524814, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-176\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2525001, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-176\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2525095, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x72241e840670>\nnetwork_scanner_node = psutil.Process(pid=2525095, name='python3', status='sleeping', started='13:04:53')\nnetwork_status_client = (<rclpy.node.Node object at 0x72241d1a5f30>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.08s (0:01:25)\n\nstderr:\nProcess 2524637 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2524706 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2524814 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2524939 no longer exists\nProcess 2525001 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2525095 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":8,"attempt":7}
{"attempt_time":115.9987676144,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1172,"total_tokens":4521,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2525523, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2525566, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2525700, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-177\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2525884, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-177\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2525968, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x73039b540580>\nnetwork_scanner_node = psutil.Process(pid=2525968, name='python3', status='sleeping', started='13:06:53')\nnetwork_status_client = (<rclpy.node.Node object at 0x730399da5840>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743329216, nanosec=469428900), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x730399da5840>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743329216, nanosec=469428900), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.04s (0:01:21)\n\nstderr:\nProcess 2525523 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2525566 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2525700 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2525822 no longer exists\nProcess 2525884 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2525968 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":8,"attempt":8}
{"attempt_time":108.5335233212,"success":false,"final_state":"TEST","tests_passed":8,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1132,"total_tokens":4481,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2526262, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2526352, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2526439, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-178\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2526630, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-178\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2526738, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-178\/test_outdated_json_results_net0\/nscan\nChild process PID: 2526815, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nF\n=================================== FAILURES ===================================\n__________ TestFull.test_outdated_json_results[network_scanner_node0] __________\n\nself = <test_scanner_node.TestFull object at 0x78c4dc3e7070>\nnetwork_scanner_node = psutil.Process(pid=2526815, status='terminated', started='13:08:37')\nnetwork_status_client = (<rclpy.node.Node object at 0x78c4db4a5de0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_outdated_json_results(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON result file is older than 20 seconds,\n        the scanner node publishes a message with an empty addresses list.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        # Create outdated JSON file - will check from the first scan\n        data = {\"7.7.7.7\": {\"state\": \"UP\", \"response_time_ms\": 15, \"error\": None}}\n        with open(json_file_path, \"w\") as f:\n            json.dump(data, f)\n    \n        # Backdate the modification time by 20 seconds\n        old_time = time.time() - 20\n        os.utime(json_file_path, (old_time, old_time))\n    \n        client_node, received_msgs = network_status_client\n>       assert wait_for_messages(\n            client_node, received_msgs, count=3, timeout=10\n        ), \"Did not receive at least 3 messages in time\"\nE       AssertionError: Did not receive at least 3 messages in time\nE       assert False\nE        +  where False = wait_for_messages(<rclpy.node.Node object at 0x78c4db4a5de0>, [], count=3, timeout=10)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:335: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_outdated_json_results[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 8 passed in 94.63s (0:01:34)\n\nstderr:\nProcess 2526262 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2526352 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2526439 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2526584 no longer exists\nProcess 2526630 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":8,"attempt":9}
{"attempt_time":119.6121823788,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1142,"total_tokens":4491,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.54s]\n\nSummary: 1 package finished [0.70s]\n.Child process PID: 2527291, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2527370, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2527436, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-179\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2527623, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-179\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2527764, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7b09ce338640>\nnetwork_scanner_node = psutil.Process(pid=2527764, name='python3', status='sleeping', started='13:10:37')\nnetwork_status_client = (<rclpy.node.Node object at 0x7b09ccba5960>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.08s (0:01:25)\n\nstderr:\nProcess 2527291 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2527370 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2527436 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2527584 no longer exists\nProcess 2527623 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2527764 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":8,"attempt":10}
{"attempt_time":105.3222548962,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1104,"total_tokens":4453,"error":null,"iteration":8,"attempt":11}
{"attempt_time":119.7810313702,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1211,"total_tokens":4560,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.56s]\n\nSummary: 1 package finished [0.72s]\n.Child process PID: 2529008, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2529047, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2529178, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-181\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2529354, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-181\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2529440, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7092bd734f40>\nnetwork_scanner_node = psutil.Process(pid=2529440, name='python3', status='sleeping', started='13:14:23')\nnetwork_status_client = (<rclpy.node.Node object at 0x7092bbf71a20>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.06s (0:01:25)\n\nstderr:\nProcess 2529008 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2529047 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2529178 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2529257 no longer exists\nProcess 2529354 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2529440 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":9,"attempt":1}
{"attempt_time":94.9147984982,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1167,"total_tokens":4516,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2529744, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2529781, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2529922, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-182\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2530108, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-182\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2530176, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7999a643b1f0>\nnetwork_scanner_node = psutil.Process(pid=2530176, name='python3', status='sleeping', started='13:15:58')\nnetwork_status_client = (<rclpy.node.Node object at 0x7999a552df30>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.03s (0:01:25)\n\nstderr:\nProcess 2529744 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2529781 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2529922 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2530020 no longer exists\nProcess 2530108 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2530176 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":9,"attempt":2}
{"attempt_time":121.6470770836,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1117,"total_tokens":4466,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2530635, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2530674, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2530811, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-183\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2530999, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-183\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2531073, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x781aee3471f0>\nnetwork_scanner_node = psutil.Process(pid=2531073, name='python3', status='sleeping', started='13:17:59')\nnetwork_status_client = (<rclpy.node.Node object at 0x781aee345bd0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.07s (0:01:25)\n\nstderr:\nProcess 2530635 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2530674 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2530811 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2530924 no longer exists\nProcess 2530999 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2531073 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":9,"attempt":3}
{"attempt_time":105.4042901993,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1114,"total_tokens":4463,"error":null,"iteration":9,"attempt":4}
{"attempt_time":120.7867686749,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1178,"total_tokens":4527,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2532351, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2532427, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2532487, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-185\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2532676, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-185\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2532818, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x74d7d3adc640>\nnetwork_scanner_node = psutil.Process(pid=2532818, name='python3', status='sleeping', started='13:21:45')\nnetwork_status_client = (<rclpy.node.Node object at 0x74d7d23a5990>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.07s (0:01:25)\n\nstderr:\nProcess 2532351 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2532427 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2532487 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2532634 no longer exists\nProcess 2532676 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2532818 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":10,"attempt":1}
{"attempt_time":105.3559720516,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1139,"total_tokens":4488,"error":null,"iteration":10,"attempt":2}
{"attempt_time":120.1373558044,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1225,"total_tokens":4574,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2534058, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2534097, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2534213, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-187\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2534385, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-187\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2534493, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7ed759240580>\nnetwork_scanner_node = psutil.Process(pid=2534493, name='python3', status='sleeping', started='13:25:31')\nnetwork_status_client = (<rclpy.node.Node object at 0x7ed7592421d0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2534058 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2534097 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2534213 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2534312 no longer exists\nProcess 2534385 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2534493 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":11,"attempt":1}
{"attempt_time":94.9991612434,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1207,"total_tokens":4556,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.62s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2534794, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2534837, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2534963, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-188\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2535133, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-188\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2535227, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7ef217642d40>\nnetwork_scanner_node = psutil.Process(pid=2535227, name='python3', status='sleeping', started='13:27:06')\nnetwork_status_client = (<rclpy.node.Node object at 0x7ef2176422c0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.09s (0:01:25)\n\nstderr:\nProcess 2534794 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2534837 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2534963 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2535043 no longer exists\nProcess 2535133 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2535227 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":11,"attempt":2}
{"attempt_time":130.1499686241,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1190,"total_tokens":4539,"error":null,"iteration":11,"attempt":3}
{"attempt_time":129.985855341,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1152,"total_tokens":4501,"error":null,"iteration":12,"attempt":1}
{"attempt_time":119.661178112,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1139,"total_tokens":4488,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.62s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2537542, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2537621, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2537717, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-191\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2537906, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-191\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2538012, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x78b6c1546d10>\nnetwork_scanner_node = psutil.Process(pid=2538012, name='python3', status='sleeping', started='13:33:26')\nnetwork_status_client = (<rclpy.node.Node object at 0x78b6c15447f0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.08s (0:01:25)\n\nstderr:\nProcess 2537542 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2537621 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2537717 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2537848 no longer exists\nProcess 2537906 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2538012 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":13,"attempt":1}
{"attempt_time":90.8949551582,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1177,"total_tokens":4526,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.62s]\n\nSummary: 1 package finished [0.80s]\n.Child process PID: 2538275, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2538371, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2538453, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-192\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2538645, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-192\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2538760, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x714c81adc580>\nnetwork_scanner_node = psutil.Process(pid=2538760, name='python3', status='sleeping', started='13:35:01')\nnetwork_status_client = (<rclpy.node.Node object at 0x714c81adcaf0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743330903, nanosec=855832633), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x714c81adcaf0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743330903, nanosec=855832633), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.04s (0:01:21)\n\nstderr:\nProcess 2538275 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2538371 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2538453 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2538597 no longer exists\nProcess 2538645 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2538760 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":13,"attempt":2}
{"attempt_time":119.9654846191,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1210,"total_tokens":4559,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2539151, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2539190, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2539324, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-193\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2539513, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-193\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2539581, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7e28517471f0>\nnetwork_scanner_node = psutil.Process(pid=2539581, name='python3', status='sleeping', started='13:36:57')\nnetwork_status_client = (<rclpy.node.Node object at 0x7e28517475e0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2539151 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2539190 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2539324 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2539436 no longer exists\nProcess 2539513 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2539581 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":13,"attempt":3}
{"attempt_time":104.6133089066,"success":false,"final_state":"TEST","tests_passed":8,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1114,"total_tokens":4463,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2539886, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2539950, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2540066, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-194\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2540249, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-194\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2540345, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-194\/test_outdated_json_results_net0\/nscan\nChild process PID: 2540431, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nF\n=================================== FAILURES ===================================\n__________ TestFull.test_outdated_json_results[network_scanner_node0] __________\n\nself = <test_scanner_node.TestFull object at 0x7c4e0eae3070>\nnetwork_scanner_node = psutil.Process(pid=2540431, status='terminated', started='13:38:40')\nnetwork_status_client = (<rclpy.node.Node object at 0x7c4e0d3a1ed0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_outdated_json_results(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON result file is older than 20 seconds,\n        the scanner node publishes a message with an empty addresses list.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        # Create outdated JSON file - will check from the first scan\n        data = {\"7.7.7.7\": {\"state\": \"UP\", \"response_time_ms\": 15, \"error\": None}}\n        with open(json_file_path, \"w\") as f:\n            json.dump(data, f)\n    \n        # Backdate the modification time by 20 seconds\n        old_time = time.time() - 20\n        os.utime(json_file_path, (old_time, old_time))\n    \n        client_node, received_msgs = network_status_client\n>       assert wait_for_messages(\n            client_node, received_msgs, count=3, timeout=10\n        ), \"Did not receive at least 3 messages in time\"\nE       AssertionError: Did not receive at least 3 messages in time\nE       assert False\nE        +  where False = wait_for_messages(<rclpy.node.Node object at 0x7c4e0d3a1ed0>, [], count=3, timeout=10)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:335: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_outdated_json_results[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 8 passed in 94.67s (0:01:34)\n\nstderr:\nProcess 2539886 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2539950 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2540066 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2540189 no longer exists\nProcess 2540249 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":13,"attempt":4}
{"attempt_time":130.4917173386,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1164,"total_tokens":4513,"error":null,"iteration":13,"attempt":5}
{"attempt_time":129.9319534302,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1136,"total_tokens":4485,"error":null,"iteration":14,"attempt":1}
{"attempt_time":119.4905502796,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1164,"total_tokens":4513,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.72s]\n.Child process PID: 2542816, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2542859, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2542957, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-197\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2543129, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-197\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2543252, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x72fdf9045030>\nnetwork_scanner_node = psutil.Process(pid=2543252, name='python3', status='sleeping', started='13:45:01')\nnetwork_status_client = (<rclpy.node.Node object at 0x72fdf9047550>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2542816 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2542859 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2542957 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2543068 no longer exists\nProcess 2543129 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2543252 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":15,"attempt":1}
{"attempt_time":95.1099534035,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1145,"total_tokens":4494,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.56s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2543557, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2543596, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2543712, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-198\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2543880, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-198\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2543989, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x769005641000>\nnetwork_scanner_node = psutil.Process(pid=2543989, name='python3', status='sleeping', started='13:46:36')\nnetwork_status_client = (<rclpy.node.Node object at 0x7690046f9e10>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.19s (0:01:25)\n\nstderr:\nProcess 2543557 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2543596 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2543712 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2543806 no longer exists\nProcess 2543880 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2543989 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":15,"attempt":2}
{"attempt_time":119.4243745804,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1122,"total_tokens":4471,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2544431, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2544474, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2544571, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-199\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2544727, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-199\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2544871, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x77fbea33f1f0>\nnetwork_scanner_node = psutil.Process(pid=2544871, name='python3', status='sleeping', started='13:48:36')\nnetwork_status_client = (<rclpy.node.Node object at 0x77fbe8ba5c90>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.06s (0:01:25)\n\nstderr:\nProcess 2544431 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2544474 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2544571 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2544689 no longer exists\nProcess 2544727 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2544871 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":15,"attempt":3}
{"attempt_time":105.3241157532,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1131,"total_tokens":4480,"error":null,"iteration":15,"attempt":4}
{"attempt_time":119.321811676,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1138,"total_tokens":4487,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2546101, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2546138, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2546276, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-201\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2546464, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-201\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2546533, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x784751240640>\nnetwork_scanner_node = psutil.Process(pid=2546533, name='python3', status='sleeping', started='13:52:20')\nnetwork_status_client = (<rclpy.node.Node object at 0x7847512408e0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.07s (0:01:25)\n\nstderr:\nProcess 2546101 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2546138 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2546276 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2546380 no longer exists\nProcess 2546464 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2546533 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":1}
{"attempt_time":94.9810187817,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1147,"total_tokens":4496,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2546844, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2546920, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2547017, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-202\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2547206, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-202\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2547314, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x775716c47310>\nnetwork_scanner_node = psutil.Process(pid=2547314, name='python3', status='sleeping', started='13:53:55')\nnetwork_status_client = (<rclpy.node.Node object at 0x775716c47a00>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2546844 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2546920 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2547017 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2547151 no longer exists\nProcess 2547206 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2547314 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":2}
{"attempt_time":112.5278615952,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1102,"total_tokens":4451,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2547726, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2547770, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2547903, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-203\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2548092, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-203\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2548175, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7a67ccf48580>\nnetwork_scanner_node = psutil.Process(pid=2548175, name='python3', status='sleeping', started='13:55:55')\nnetwork_status_client = (<rclpy.node.Node object at 0x7a67cb7a99c0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743332158, nanosec=264854450), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7a67cb7a99c0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743332158, nanosec=264854450), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.97s (0:01:17)\n\nstderr:\nProcess 2547726 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2547770 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2547903 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2548027 no longer exists\nProcess 2548092 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":3}
{"attempt_time":102.0411162376,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1128,"total_tokens":4477,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2548465, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2548552, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2548642, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-204\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2548826, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-204\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2548947, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x76a77d0e0580>\nnetwork_scanner_node = psutil.Process(pid=2548947, name='python3', status='sleeping', started='13:57:30')\nnetwork_status_client = (<rclpy.node.Node object at 0x76a77b9a1ff0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.05s (0:01:25)\n\nstderr:\nProcess 2548465 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2548552 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2548642 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2548789 no longer exists\nProcess 2548826 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2548947 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":4}
{"attempt_time":119.5117452145,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1160,"total_tokens":4509,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2549349, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2549426, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2549526, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-205\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2549713, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-205\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2549819, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7927da844580>\nnetwork_scanner_node = psutil.Process(pid=2549819, name='python3', status='sleeping', started='13:59:30')\nnetwork_status_client = (<rclpy.node.Node object at 0x7927d915dff0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.03s (0:01:25)\n\nstderr:\nProcess 2549349 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2549426 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2549526 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2549665 no longer exists\nProcess 2549713 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2549819 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":5}
{"attempt_time":87.8921904564,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1106,"total_tokens":4455,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2550082, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2550189, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2550264, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-206\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2550449, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-206\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2550586, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7e2f83c45000>\nnetwork_scanner_node = psutil.Process(pid=2550586, name='python3', status='sleeping', started='14:01:05')\nnetwork_status_client = (<rclpy.node.Node object at 0x7e2f83c47430>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743332467, nanosec=726730354), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7e2f83c47430>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743332467, nanosec=726730354), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 78.00s (0:01:17)\n\nstderr:\nProcess 2550082 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2550189 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2550264 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2550408 no longer exists\nProcess 2550449 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":6}
{"attempt_time":119.787309885,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1196,"total_tokens":4545,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2550950, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2550989, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2551128, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-207\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2551313, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-207\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2551387, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7c8d17f38f70>\nnetwork_scanner_node = psutil.Process(pid=2551387, name='python3', status='sleeping', started='14:02:57')\nnetwork_status_client = (<rclpy.node.Node object at 0x7c8d17f3b970>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.08s (0:01:25)\n\nstderr:\nProcess 2550950 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2550989 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2551128 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2551239 no longer exists\nProcess 2551313 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2551387 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":7}
{"attempt_time":94.94683218,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1103,"total_tokens":4452,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2551688, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2551771, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2551868, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-208\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2552054, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-208\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2552171, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7e1cc78ded10>\nnetwork_scanner_node = psutil.Process(pid=2552171, name='python3', status='sleeping', started='14:04:32')\nnetwork_status_client = (<rclpy.node.Node object at 0x7e1cc61a5780>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2551688 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2551771 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2551868 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2552007 no longer exists\nProcess 2552054 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2552171 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":8}
{"attempt_time":115.2241368294,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1112,"total_tokens":4461,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2553412, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2553468, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2553585, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-209\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2553774, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-209\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2553844, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x711587c45060>\nnetwork_scanner_node = psutil.Process(pid=2553844, name='python3', status='sleeping', started='14:06:32')\nnetwork_status_client = (<rclpy.node.Node object at 0x711586d39de0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743332794, nanosec=673218505), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x711586d39de0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743332794, nanosec=673218505), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.03s (0:01:21)\n\nstderr:\nProcess 2553412 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2553468 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2553585 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2553700 no longer exists\nProcess 2553774 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2553844 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":9}
{"attempt_time":95.0235784054,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1165,"total_tokens":4514,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2554148, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2554237, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2554318, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-210\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2554516, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-210\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2554636, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7845a12d8670>\nnetwork_scanner_node = psutil.Process(pid=2554636, name='python3', status='sleeping', started='14:08:07')\nnetwork_status_client = (<rclpy.node.Node object at 0x7845a12d8c10>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743332889, nanosec=706958744), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7845a12d8c10>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743332889, nanosec=706958744), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.11s (0:01:21)\n\nstderr:\nProcess 2554148 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2554237 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2554318 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2554468 no longer exists\nProcess 2554516 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2554636 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":10}
{"attempt_time":115.7895100117,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1175,"total_tokens":4524,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2555020, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2555131, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2555266, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-211\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2555453, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-211\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2555523, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7ad5387cf1f0>\nnetwork_scanner_node = psutil.Process(pid=2555523, name='python3', status='sleeping', started='14:10:02')\nnetwork_status_client = (<rclpy.node.Node object at 0x7ad5387ccd00>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743333005, nanosec=537498961), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7ad5387ccd00>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743333005, nanosec=537498961), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.02s (0:01:21)\n\nstderr:\nProcess 2555020 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2555131 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2555266 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2555380 no longer exists\nProcess 2555453 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2555523 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":11}
{"attempt_time":91.9075276852,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1112,"total_tokens":4461,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.63s]\n\nSummary: 1 package finished [0.82s]\n.Child process PID: 2555826, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2555905, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2555999, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-212\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2556192, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-212\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2556300, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x74f51d43c640>\nnetwork_scanner_node = psutil.Process(pid=2556300, name='python3', status='sleeping', started='14:11:37')\nnetwork_status_client = (<rclpy.node.Node object at 0x74f51d43ca90>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743333100, nanosec=508976391), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x74f51d43ca90>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743333100, nanosec=508976391), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.99s (0:01:17)\n\nstderr:\nProcess 2555826 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2555905 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2555999 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2556144 no longer exists\nProcess 2556192 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":12}
{"attempt_time":115.4736890793,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1134,"total_tokens":4483,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.72s]\n.Child process PID: 2556689, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2556732, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2556860, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-213\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2557034, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-213\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2557124, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7c1e52942d40>\nnetwork_scanner_node = psutil.Process(pid=2557124, name='python3', status='sleeping', started='14:13:30')\nnetwork_status_client = (<rclpy.node.Node object at 0x7c1e529405e0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743333212, nanosec=913760708), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7c1e529405e0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743333212, nanosec=913760708), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.02s (0:01:21)\n\nstderr:\nProcess 2556689 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2556732 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2556860 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2556943 no longer exists\nProcess 2557034 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2557124 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":13}
{"attempt_time":98.9648461342,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1138,"total_tokens":4487,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2557423, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2557468, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2557603, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-214\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2557783, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-214\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2557861, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x766546844640>\nnetwork_scanner_node = psutil.Process(pid=2557861, name='python3', status='sleeping', started='14:15:05')\nnetwork_status_client = (<rclpy.node.Node object at 0x766545931960>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.03s (0:01:25)\n\nstderr:\nProcess 2557423 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2557468 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2557603 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2557682 no longer exists\nProcess 2557783 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2557861 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":14}
{"attempt_time":119.3996646404,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1163,"total_tokens":4512,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2558310, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2558347, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2558466, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-215\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2558638, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-215\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2558744, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7b14c8d42d10>\nnetwork_scanner_node = psutil.Process(pid=2558744, name='python3', status='sleeping', started='14:17:04')\nnetwork_status_client = (<rclpy.node.Node object at 0x7b14c75a5990>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.05s (0:01:25)\n\nstderr:\nProcess 2558310 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2558347 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2558466 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2558561 no longer exists\nProcess 2558638 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2558744 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":15}
{"attempt_time":87.851685524,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1087,"total_tokens":4436,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.61s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2559044, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2559087, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2559219, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-216\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2559395, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-216\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2559478, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x77944c84c640>\nnetwork_scanner_node = psutil.Process(pid=2559478, name='python3', status='sleeping', started='14:18:39')\nnetwork_status_client = (<rclpy.node.Node object at 0x77944b93d960>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743333522, nanosec=266275104), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x77944b93d960>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743333522, nanosec=266275104), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.94s (0:01:17)\n\nstderr:\nProcess 2559044 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2559087 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2559219 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2559302 no longer exists\nProcess 2559395 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":16}
{"attempt_time":119.4674210548,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1140,"total_tokens":4489,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2559890, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2559947, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2560011, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-217\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2560198, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-217\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2560340, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7cfe66d38670>\nnetwork_scanner_node = psutil.Process(pid=2560340, name='python3', status='sleeping', started='14:20:32')\nnetwork_status_client = (<rclpy.node.Node object at 0x7cfe66d38ac0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.02s (0:01:25)\n\nstderr:\nProcess 2559890 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2559947 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2560011 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2560152 no longer exists\nProcess 2560198 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2560340 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":17}
{"attempt_time":87.9071662426,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1102,"total_tokens":4451,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2560636, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2560677, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2560755, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-218\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2560937, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-218\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2561074, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7e87a9145030>\nnetwork_scanner_node = psutil.Process(pid=2561074, name='python3', status='sleeping', started='14:22:07')\nnetwork_status_client = (<rclpy.node.Node object at 0x7e87a9147550>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743333729, nanosec=686189286), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7e87a9147550>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743333729, nanosec=686189286), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.94s (0:01:17)\n\nstderr:\nProcess 2560636 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2560677 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2560755 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2560891 no longer exists\nProcess 2560937 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":18}
{"attempt_time":38.0460083485,"success":false,"final_state":"TEST","tests_passed":1,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1158,"total_tokens":4507,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.56s]\n\nSummary: 1 package finished [0.74s]\n.E\n==================================== ERRORS ====================================\n_________________ ERROR at setup of TestFull.test_node_running _________________\n\nrequest = <SubRequest 'network_scanner_node' for <Function test_node_running>>\ntmp_path = PosixPath('\/tmp\/pytest-of-aleev\/pytest-219\/test_node_running0')\nmonkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x72da3c73d480>\n\n    @pytest.fixture(scope=\"function\")\n    def network_scanner_node(request, tmp_path, monkeypatch):\n        \"\"\"Fixture that sets up a network scanner node with the provided parameters.\"\"\"\n        if not rclpy.ok():\n            rclpy.init()\n    \n        # Default parameters\n        network = \"4.2.2.2\"\n        scan_period = 3\n        mock_nscan = False\n        mock_nscan_text = \"\"\"#!\/bin\/bash\n        echo \"NSCAN\"\n        \"\"\"\n        if hasattr(request, \"param\"):\n            params = request.param\n            network = params.get(\"network\", network)\n            scan_period = params.get(\"scan_period\", scan_period)\n            mock_nscan = params.get(\"mock_nscan\", mock_nscan)\n            mock_nscan_text = params.get(\"mock_nscan_text\", mock_nscan_text)\n    \n        if mock_nscan:\n            print(\"Using mock nscan binary\")\n            nscan_path = os.path.join(tmp_path, \"nscan\")\n            with open(nscan_path, \"w\") as f:\n                f.write(mock_nscan_text)\n            os.chmod(nscan_path, 0o755)\n    \n            monkeypatch.setenv(\"PATH\", f\"{tmp_path}:{os.environ.get('PATH')}\")\n            print(f\"nscan path: {nscan_path}\")\n    \n        runner = ros2_runner.ROS2Runner(\n            node_command=f\"ros2 run network_scanner scanner_node --ros-args -p network:={network!r} -p scan_period:={scan_period}\",\n            test_command=\"\",\n        )\n>       runner.start_node()\n\nsrc\/network_scanner\/test\/test_scanner_node.py:46: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <codestral_ros2_gen.utils.ros2_runner.ROS2Runner object at 0x72da3c73d4b0>\n\n    def start_node(self) -> None:\n        \"\"\"\n        Start the ROS2 node and verify it launched successfully.\n    \n        If \"skip \/ SKIP\" is found in the node_command, the node is not started.\n    \n        Raises:\n            RuntimeError: If the node fails to start or register with ROS2.\n        \"\"\"\n        logger.info(\"Starting the ROS2 node...\")\n        if \"skip\" in self.node_command.lower():\n            logger.info(\"Skipping node start as requested.\")\n            return\n        else:\n            self.node_process = subprocess.Popen(\n                self.node_command,\n                shell=True,\n                executable=\"\/bin\/bash\",\n                stderr=subprocess.PIPE,\n                stdout=subprocess.PIPE,\n                text=True,\n            )\n    \n            # Wait briefly for node to initialize\n            time.sleep(2)\n    \n            # Check if process is still running\n            if self.node_process.poll() is not None:\n                # Process terminated - get error output\n                stdout, stderr = self.node_process.communicate()\n                error_msg = f\"Node process terminated immediately.\\nStdout: {stdout}\\nStderr: {stderr}\"\n>               raise RuntimeError(error_msg)\nE               RuntimeError: Node process terminated immediately.\nE               Stdout: [ros2run]: Process exited with failure 1\nE               \nE               Stderr: Traceback (most recent call last):\nE                 File \"\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node\", line 10, in <module>\nE                   from rclpy.exceptions import ParameterNotDeclaredException, ParameterValueException\nE               ImportError: cannot import name 'ParameterValueException' from 'rclpy.exceptions' (\/opt\/ros\/humble\/local\/lib\/python3.10\/dist-packages\/rclpy\/exceptions.py)\n\n..\/codestral_ros2_gen\/src\/codestral_ros2_gen\/utils\/ros2_runner.py:79: RuntimeError\n=========================== short test summary info ============================\nERROR src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_node_running\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 passed, 1 error in 3.59s\n\nstderr:\n","iteration":16,"attempt":19}
{"attempt_time":115.9716265202,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1224,"total_tokens":4573,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.78s]\n.Child process PID: 2561803, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2561869, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2561932, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-220\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2562113, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-220\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2562257, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x73ad57041030>\nnetwork_scanner_node = psutil.Process(pid=2562257, name='python3', status='sleeping', started='14:24:37')\nnetwork_status_client = (<rclpy.node.Node object at 0x73ad57041ae0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743333880, nanosec=628165533), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x73ad57041ae0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743333880, nanosec=628165533), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.04s (0:01:21)\n\nstderr:\nProcess 2561803 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2561869 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2561932 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2562073 no longer exists\nProcess 2562113 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2562257 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":20}
{"attempt_time":112.4297583103,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1123,"total_tokens":4472,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2562627, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2562718, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2562798, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-221\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2562983, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-221\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2563103, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7debae4c7310>\nnetwork_scanner_node = psutil.Process(pid=2563103, name='python3', status='sleeping', started='14:26:33')\nnetwork_status_client = (<rclpy.node.Node object at 0x7debae4c7880>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743333996, nanosec=179899880), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7debae4c7880>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743333996, nanosec=179899880), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.94s (0:01:17)\n\nstderr:\nProcess 2562627 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2562718 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2562798 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2562940 no longer exists\nProcess 2562983 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":21}
{"attempt_time":95.0115077496,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1116,"total_tokens":4465,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.61s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2563363, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2563466, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2563534, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-222\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2563723, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-222\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2563863, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x754e3c0d8670>\nnetwork_scanner_node = psutil.Process(pid=2563863, name='python3', status='sleeping', started='14:28:08')\nnetwork_status_client = (<rclpy.node.Node object at 0x754e3a9a59c0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743334091, nanosec=180843818), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x754e3a9a59c0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743334091, nanosec=180843818), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 78.00s (0:01:17)\n\nstderr:\nProcess 2563363 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2563466 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2563534 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2563683 no longer exists\nProcess 2563723 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":22}
{"attempt_time":115.7271170616,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1127,"total_tokens":4476,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2564220, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2564263, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2564401, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-223\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2564581, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-223\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2564655, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x786c6aeced10>\nnetwork_scanner_node = psutil.Process(pid=2564655, name='python3', status='sleeping', started='14:30:01')\nnetwork_status_client = (<rclpy.node.Node object at 0x786c69752050>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743334203, nanosec=868909242), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x786c69752050>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743334203, nanosec=868909242), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.05s (0:01:21)\n\nstderr:\nProcess 2564220 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2564263 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2564401 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2564501 no longer exists\nProcess 2564581 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2564655 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":16,"attempt":23}
{"attempt_time":109.4272317886,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1090,"total_tokens":4439,"error":null,"iteration":16,"attempt":24}
{"attempt_time":115.7575721741,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1138,"total_tokens":4487,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.61s]\n\nSummary: 1 package finished [0.79s]\n.Child process PID: 2565934, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2566013, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2566077, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-225\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2566263, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-225\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2566405, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x79195f13cfd0>\nnetwork_scanner_node = psutil.Process(pid=2566405, name='python3', status='sleeping', started='14:33:46')\nnetwork_status_client = (<rclpy.node.Node object at 0x79195f13f520>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743334429, nanosec=101188590), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x79195f13f520>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743334429, nanosec=101188590), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.04s (0:01:21)\n\nstderr:\nProcess 2565934 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2566013 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2566077 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2566224 no longer exists\nProcess 2566263 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2566405 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":1}
{"attempt_time":91.864215374,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1110,"total_tokens":4459,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2566692, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2566749, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2566827, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-226\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2567008, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-226\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2567144, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7836809e4640>\nnetwork_scanner_node = psutil.Process(pid=2567144, name='python3', status='sleeping', started='14:35:21')\nnetwork_status_client = (<rclpy.node.Node object at 0x78367facd930>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743334524, nanosec=44068746), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x78367facd930>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743334524, nanosec=44068746), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.94s (0:01:17)\n\nstderr:\nProcess 2566692 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2566749 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2566827 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2566953 no longer exists\nProcess 2567008 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":2}
{"attempt_time":115.820551157,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1177,"total_tokens":4526,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.78s]\n.Child process PID: 2567503, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2567590, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2567667, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-227\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2567860, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-227\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2567980, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x739d31a3cfd0>\nnetwork_scanner_node = psutil.Process(pid=2567980, name='python3', status='sleeping', started='14:37:14')\nnetwork_status_client = (<rclpy.node.Node object at 0x739d31a3f280>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743334636, nanosec=825192373), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x739d31a3f280>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743334636, nanosec=825192373), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.04s (0:01:21)\n\nstderr:\nProcess 2567503 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2567590 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2567667 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2567822 no longer exists\nProcess 2567860 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2567980 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":3}
{"attempt_time":91.9098260403,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1179,"total_tokens":4528,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.61s]\n\nSummary: 1 package finished [0.78s]\n.Child process PID: 2568241, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2568346, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2568416, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-228\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2568597, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-228\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2568730, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x70686a347310>\nnetwork_scanner_node = psutil.Process(pid=2568730, name='python3', status='sleeping', started='14:38:49')\nnetwork_status_client = (<rclpy.node.Node object at 0x706868badf30>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743334731, nanosec=781089905), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x706868badf30>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743334731, nanosec=781089905), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.98s (0:01:17)\n\nstderr:\nProcess 2568241 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2568346 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2568416 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2568563 no longer exists\nProcess 2568597 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":4}
{"attempt_time":116.0902290344,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1167,"total_tokens":4516,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.61s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2569161, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2569210, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2569342, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-229\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2569525, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-229\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2569604, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7d8ac13e4640>\nnetwork_scanner_node = psutil.Process(pid=2569604, name='python3', status='sleeping', started='14:40:42')\nnetwork_status_client = (<rclpy.node.Node object at 0x7d8ac04d2050>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743334844, nanosec=847785617), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7d8ac04d2050>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743334844, nanosec=847785617), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.01s (0:01:21)\n\nstderr:\nProcess 2569161 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2569210 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2569342 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2569430 no longer exists\nProcess 2569525 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2569604 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":5}
{"attempt_time":99.097287178,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1122,"total_tokens":4471,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2569904, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2569955, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2570077, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-230\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2570267, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-230\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2570347, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7e73a6a3d060>\nnetwork_scanner_node = psutil.Process(pid=2570347, name='python3', status='sleeping', started='14:42:17')\nnetwork_status_client = (<rclpy.node.Node object at 0x7e73a5ae5f60>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.15s (0:01:25)\n\nstderr:\nProcess 2569904 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2569955 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2570077 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2570190 no longer exists\nProcess 2570267 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2570347 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":6}
{"attempt_time":115.5990195274,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1179,"total_tokens":4528,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2570781, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2570830, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2570958, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-231\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2571139, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-231\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2571218, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x77da5fa40670>\nnetwork_scanner_node = psutil.Process(pid=2571218, name='python3', status='sleeping', started='14:44:16')\nnetwork_status_client = (<rclpy.node.Node object at 0x77da5e36df30>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743335059, nanosec=556734700), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x77da5e36df30>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743335059, nanosec=556734700), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.06s (0:01:21)\n\nstderr:\nProcess 2570781 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2570830 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2570958 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2571049 no longer exists\nProcess 2571139 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2571218 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":7}
{"attempt_time":94.9668073654,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1118,"total_tokens":4467,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.61s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2571517, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2571562, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2571699, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-232\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2571881, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-232\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2571955, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7c453a9e8670>\nnetwork_scanner_node = psutil.Process(pid=2571955, name='python3', status='sleeping', started='14:45:51')\nnetwork_status_client = (<rclpy.node.Node object at 0x7c4539ab1f30>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743335154, nanosec=553916026), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7c4539ab1f30>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743335154, nanosec=553916026), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.03s (0:01:21)\n\nstderr:\nProcess 2571517 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2571562 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2571699 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2571798 no longer exists\nProcess 2571881 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2571955 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":8}
{"attempt_time":115.3840546608,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1144,"total_tokens":4493,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2572392, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2572431, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2572545, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-233\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2572701, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-233\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2572821, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x782f99244580>\nnetwork_scanner_node = psutil.Process(pid=2572821, name='python3', status='sleeping', started='14:47:47')\nnetwork_status_client = (<rclpy.node.Node object at 0x782f982f9c60>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743335269, nanosec=957744893), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x782f982f9c60>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743335269, nanosec=957744893), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.11s (0:01:21)\n\nstderr:\nProcess 2572392 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2572431 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2572545 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2572641 no longer exists\nProcess 2572701 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2572821 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":9}
{"attempt_time":94.8402154446,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1182,"total_tokens":4531,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2573126, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2573163, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2573295, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-234\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2573468, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-234\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2573556, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x71c056140fd0>\nnetwork_scanner_node = psutil.Process(pid=2573556, name='python3', status='sleeping', started='14:49:22')\nnetwork_status_client = (<rclpy.node.Node object at 0x71c0561430d0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743335364, nanosec=817045818), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x71c0561430d0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743335364, nanosec=817045818), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.02s (0:01:21)\n\nstderr:\nProcess 2573126 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2573163 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2573295 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2573380 no longer exists\nProcess 2573468 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2573556 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":10}
{"attempt_time":112.2600753307,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1130,"total_tokens":4479,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2573992, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2574029, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2574115, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-235\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2574287, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-235\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2574423, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x75a715039000>\nnetwork_scanner_node = psutil.Process(pid=2574423, name='python3', status='sleeping', started='14:51:17')\nnetwork_status_client = (<rclpy.node.Node object at 0x75a71503b460>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743335480, nanosec=174353719), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x75a71503b460>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743335480, nanosec=174353719), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.96s (0:01:17)\n\nstderr:\nProcess 2573992 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2574029 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2574115 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2574247 no longer exists\nProcess 2574287 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":11}
{"attempt_time":900.2096629143,"success":false,"final_state":"GENERATE","tests_passed":0,"tests_failed":0,"tests_skipped":0,"prompt_tokens":0,"completion_tokens":0,"total_tokens":0,"error":"API error: API error occurred: Status 504\n{\n  \"message\":\"The upstream server is timing out\",\n  \"request_id\":\"77618330e2c38a201c28976de525f575\"\n}","iteration":17,"attempt":12}
{"attempt_time":115.665869236,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1166,"total_tokens":4515,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.78s]\n.Child process PID: 2579444, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2579477, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2579557, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-236\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2579742, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-236\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2579876, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7532ecd44670>\nnetwork_scanner_node = psutil.Process(pid=2579876, name='python3', status='sleeping', started='15:08:10')\nnetwork_status_client = (<rclpy.node.Node object at 0x7532eb5a5f30>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743336493, nanosec=8310875), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7532eb5a5f30>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743336493, nanosec=8310875), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.07s (0:01:21)\n\nstderr:\nProcess 2579444 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2579477 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2579557 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2579694 no longer exists\nProcess 2579742 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2579876 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":13}
{"attempt_time":91.8392891884,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1132,"total_tokens":4481,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2580187, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2580222, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2580339, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-237\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2580569, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-237\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2580683, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7a1c2a541060>\nnetwork_scanner_node = psutil.Process(pid=2580683, name='python3', status='sleeping', started='15:09:45')\nnetwork_status_client = (<rclpy.node.Node object at 0x7a1c28da9f60>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743336587, nanosec=939052432), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7a1c28da9f60>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743336587, nanosec=939052432), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.94s (0:01:17)\n\nstderr:\nProcess 2580187 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2580222 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2580339 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2580504 no longer exists\nProcess 2580569 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":14}
{"attempt_time":115.461016655,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1145,"total_tokens":4494,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2581088, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2581157, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2581221, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-238\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2581402, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-238\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2581551, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7ade8509ce80>\nnetwork_scanner_node = psutil.Process(pid=2581551, name='python3', status='sleeping', started='15:11:37')\nnetwork_status_client = (<rclpy.node.Node object at 0x7ade83b769e0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743336700, nanosec=327224687), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7ade83b769e0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743336700, nanosec=327224687), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 80.98s (0:01:20)\n\nstderr:\nProcess 2581088 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2581157 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2581221 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2581362 no longer exists\nProcess 2581402 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2581551 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":15}
{"attempt_time":95.0072894096,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1192,"total_tokens":4541,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2581827, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2581890, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2581970, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-239\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2582150, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-239\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2582286, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7b2df6942d10>\nnetwork_scanner_node = psutil.Process(pid=2582286, name='python3', status='sleeping', started='15:13:12')\nnetwork_status_client = (<rclpy.node.Node object at 0x7b2df51a9c60>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743336795, nanosec=367388464), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7b2df51a9c60>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743336795, nanosec=367388464), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.05s (0:01:21)\n\nstderr:\nProcess 2581827 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2581890 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2581970 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2582094 no longer exists\nProcess 2582150 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2582286 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":16}
{"attempt_time":119.6662459373,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1147,"total_tokens":4496,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.62s]\n\nSummary: 1 package finished [0.81s]\n.Child process PID: 2582665, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2582762, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2582826, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-240\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2583008, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-240\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2583137, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x75174f842d10>\nnetwork_scanner_node = psutil.Process(pid=2583137, name='python3', status='sleeping', started='15:15:08')\nnetwork_status_client = (<rclpy.node.Node object at 0x75174e16dde0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2582665 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2582762 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2582826 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2582977 no longer exists\nProcess 2583008 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2583137 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":17}
{"attempt_time":90.9719083309,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1173,"total_tokens":4522,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.62s]\n\nSummary: 1 package finished [0.80s]\n.Child process PID: 2583418, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2583505, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2583569, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-241\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2583749, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-241\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2583895, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7596587e4640>\nnetwork_scanner_node = psutil.Process(pid=2583895, name='python3', status='sleeping', started='15:16:43')\nnetwork_status_client = (<rclpy.node.Node object at 0x7596587e48e0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743337006, nanosec=26327404), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7596587e48e0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743337006, nanosec=26327404), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.03s (0:01:21)\n\nstderr:\nProcess 2583418 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2583505 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2583569 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2583710 no longer exists\nProcess 2583749 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2583895 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":18}
{"attempt_time":115.385979414,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1173,"total_tokens":4522,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.62s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2584265, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2584345, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2584432, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-242\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2584625, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-242\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2584725, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7ee6845ead10>\nnetwork_scanner_node = psutil.Process(pid=2584725, name='python3', status='sleeping', started='15:18:38')\nnetwork_status_client = (<rclpy.node.Node object at 0x7ee6845eb100>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743337121, nanosec=439571541), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7ee6845eb100>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743337121, nanosec=439571541), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.01s (0:01:21)\n\nstderr:\nProcess 2584265 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2584345 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2584432 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2584561 no longer exists\nProcess 2584625 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2584725 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":19}
{"attempt_time":98.9893538952,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1128,"total_tokens":4477,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.79s]\n.Child process PID: 2584998, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2585085, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2585170, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-243\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2585354, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-243\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2585478, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x71cc816dc640>\nnetwork_scanner_node = psutil.Process(pid=2585478, name='python3', status='sleeping', started='15:20:13')\nnetwork_status_client = (<rclpy.node.Node object at 0x71cc816dcbb0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2584998 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2585085 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2585170 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2585317 no longer exists\nProcess 2585354 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2585478 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":20}
{"attempt_time":119.5863478184,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1144,"total_tokens":4493,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.72s]\n.Child process PID: 2585874, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2585943, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2586044, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-244\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2586238, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-244\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2586324, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7058ed33ed10>\nnetwork_scanner_node = psutil.Process(pid=2586324, name='python3', status='sleeping', started='15:22:13')\nnetwork_status_client = (<rclpy.node.Node object at 0x7058ed33e1d0>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.03s (0:01:25)\n\nstderr:\nProcess 2585874 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2585943 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2586044 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2586175 no longer exists\nProcess 2586238 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2586324 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":21}
{"attempt_time":87.8785681725,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1092,"total_tokens":4441,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2586614, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2586705, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2586783, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-245\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2586973, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-245\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2587089, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x79817b0e2d10>\nnetwork_scanner_node = psutil.Process(pid=2587089, name='python3', status='sleeping', started='15:23:48')\nnetwork_status_client = (<rclpy.node.Node object at 0x7981799a1930>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743337431, nanosec=39946617), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7981799a1930>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743337431, nanosec=39946617), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.95s (0:01:17)\n\nstderr:\nProcess 2586614 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2586705 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2586783 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2586917 no longer exists\nProcess 2586973 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":22}
{"attempt_time":112.2587308884,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1130,"total_tokens":4479,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2587468, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2587517, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2587629, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-246\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2587815, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-246\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2587907, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x75f19c6d8670>\nnetwork_scanner_node = psutil.Process(pid=2587907, name='python3', status='sleeping', started='15:25:40')\nnetwork_status_client = (<rclpy.node.Node object at 0x75f19afa1e40>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743337543, nanosec=315266976), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x75f19afa1e40>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743337543, nanosec=315266976), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.93s (0:01:17)\n\nstderr:\nProcess 2587468 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2587517 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2587629 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2587726 no longer exists\nProcess 2587815 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":23}
{"attempt_time":98.0954885483,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1189,"total_tokens":4538,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.63s]\n\nSummary: 1 package finished [0.80s]\n.Child process PID: 2588200, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2588250, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2588384, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-247\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2588553, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-247\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2588644, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x71030dddad40>\nnetwork_scanner_node = psutil.Process(pid=2588644, name='python3', status='sleeping', started='15:27:15')\nnetwork_status_client = (<rclpy.node.Node object at 0x71030c571e10>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743337638, nanosec=340074552), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x71030c571e10>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743337638, nanosec=340074552), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.03s (0:01:21)\n\nstderr:\nProcess 2588200 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2588250 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2588384 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2588473 no longer exists\nProcess 2588553 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2588644 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":24}
{"attempt_time":119.3729543686,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1102,"total_tokens":4451,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.61s]\n\nSummary: 1 package finished [0.79s]\n.Child process PID: 2589080, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2589114, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2589212, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-248\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2589383, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-248\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2589503, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x78637f7e4640>\nnetwork_scanner_node = psutil.Process(pid=2589503, name='python3', status='sleeping', started='15:29:11')\nnetwork_status_client = (<rclpy.node.Node object at 0x78637f7e4a90>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2589080 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2589114 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2589212 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2589329 no longer exists\nProcess 2589383 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2589503 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":25}
{"attempt_time":37.6056344509,"success":false,"final_state":"TEST","tests_passed":2,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1148,"total_tokens":4497,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2589814, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2589849, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\nF\n=================================== FAILURES ===================================\n__ TestFull.test_network_scanner_parameters[network_scanner_node0-expected0] ___\n\nself = <test_scanner_node.TestFull object at 0x70830ec477f0>\nnetwork_scanner_node = psutil.Process(pid=2589849, name='python3', status='sleeping', started='15:29:45')\nnetwork_status_client = (<rclpy.node.Node object at 0x70830e19a470>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=...Time(sec=1743337795, nanosec=438845895), addresses=[network_scanner.msg.IPStatus(ip_address='8.8.8.8', status='UP')])])\nexpected = {'expected_interval': 3, 'expected_ip': ['8.8.8.8']}\n\n    @pytest.mark.order(3)\n    @pytest.mark.parametrize(\n        \"network_scanner_node,expected\",\n        [\n            (\n                {\"network\": \"8.8.8.8\", \"scan_period\": 3},\n                {\"expected_ip\": [\"8.8.8.8\"], \"expected_interval\": 3},\n            ),\n            (\n                {\"network\": \"1.1.1.1, 8.8.4.4\", \"scan_period\": 6},\n                {\"expected_ip\": [\"1.1.1.1\", \"8.8.4.4\"], \"expected_interval\": 6},\n            ),\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_network_scanner_parameters(\n        self, network_scanner_node, network_status_client, expected\n    ):\n        # Verify the node process is running\n        assert network_scanner_node.is_running(), \"Network scanner node is not running\"\n    \n        client_node, received_msgs = network_status_client\n    \n        # Wait for at least 2 messages\n        assert wait_for_messages(\n            client_node, received_msgs, count=2, timeout=20\n        ), f\"Timeout waiting for messages. Received: {len(received_msgs)}\"\n    \n        # Validate the content of the first two messages\n        for msg in received_msgs[:2]:\n            validate_message(msg, expected[\"expected_ip\"])\n    \n        # Calculate the interval using ROS timestamps\n        first_msg = received_msgs[0]\n        second_msg = received_msgs[1]\n    \n        interval = (second_msg.stamp.sec - first_msg.stamp.sec) + (\n            (second_msg.stamp.nanosec - first_msg.stamp.nanosec) * 1e-9\n        )\n    \n        # Allow 1 second of tolerance for the interval check\n>       assert (\n            abs(interval - expected[\"expected_interval\"]) < 1\n        ), f\"Interval {interval:.2f} sec, expected ~{expected['expected_interval']} sec\"\nE       AssertionError: Interval 5.99 sec, expected ~3 sec\nE       assert 2.985551063 < 1\nE        +  where 2.985551063 = abs((5.985551063 - 3))\n\nsrc\/network_scanner\/test\/test_scanner_node.py:179: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_network_scanner_parameters[network_scanner_node0-expected0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 2 passed in 27.68s\n\nstderr:\nProcess 2589814 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2589849 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":26}
{"attempt_time":3.2613008022,"success":false,"final_state":"PARSE","tests_passed":0,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":498,"total_tokens":3847,"error":"Parsing failed, no code returned.","iteration":17,"attempt":27}
{"attempt_time":115.8682091236,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1209,"total_tokens":4558,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.61s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2590315, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2590364, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2590494, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-250\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2590658, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-250\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2590758, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7f2e8533c640>\nnetwork_scanner_node = psutil.Process(pid=2590758, name='python3', status='sleeping', started='15:31:51')\nnetwork_status_client = (<rclpy.node.Node object at 0x7f2e8533cb80>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743337914, nanosec=520969959), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7f2e8533cb80>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743337914, nanosec=520969959), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 80.99s (0:01:20)\n\nstderr:\nProcess 2590315 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2590364 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2590494 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2590584 no longer exists\nProcess 2590658 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2590758 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":17,"attempt":28}
{"attempt_time":3.1679956913,"success":false,"final_state":"PARSE","tests_passed":0,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":497,"total_tokens":3846,"error":"Parsing failed, no code returned.","iteration":17,"attempt":29}
{"attempt_time":104.21413064,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1071,"total_tokens":4420,"error":null,"iteration":17,"attempt":30}
{"attempt_time":37.8988618851,"success":false,"final_state":"TEST","tests_passed":1,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1113,"total_tokens":4462,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.74s]\n.E\n==================================== ERRORS ====================================\n_________________ ERROR at setup of TestFull.test_node_running _________________\n\nrequest = <SubRequest 'network_scanner_node' for <Function test_node_running>>\ntmp_path = PosixPath('\/tmp\/pytest-of-aleev\/pytest-252\/test_node_running0')\nmonkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7dab80138e50>\n\n    @pytest.fixture(scope=\"function\")\n    def network_scanner_node(request, tmp_path, monkeypatch):\n        \"\"\"Fixture that sets up a network scanner node with the provided parameters.\"\"\"\n        if not rclpy.ok():\n            rclpy.init()\n    \n        # Default parameters\n        network = \"4.2.2.2\"\n        scan_period = 3\n        mock_nscan = False\n        mock_nscan_text = \"\"\"#!\/bin\/bash\n        echo \"NSCAN\"\n        \"\"\"\n        if hasattr(request, \"param\"):\n            params = request.param\n            network = params.get(\"network\", network)\n            scan_period = params.get(\"scan_period\", scan_period)\n            mock_nscan = params.get(\"mock_nscan\", mock_nscan)\n            mock_nscan_text = params.get(\"mock_nscan_text\", mock_nscan_text)\n    \n        if mock_nscan:\n            print(\"Using mock nscan binary\")\n            nscan_path = os.path.join(tmp_path, \"nscan\")\n            with open(nscan_path, \"w\") as f:\n                f.write(mock_nscan_text)\n            os.chmod(nscan_path, 0o755)\n    \n            monkeypatch.setenv(\"PATH\", f\"{tmp_path}:{os.environ.get('PATH')}\")\n            print(f\"nscan path: {nscan_path}\")\n    \n        runner = ros2_runner.ROS2Runner(\n            node_command=f\"ros2 run network_scanner scanner_node --ros-args -p network:={network!r} -p scan_period:={scan_period}\",\n            test_command=\"\",\n        )\n>       runner.start_node()\n\nsrc\/network_scanner\/test\/test_scanner_node.py:46: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <codestral_ros2_gen.utils.ros2_runner.ROS2Runner object at 0x7dab80138cd0>\n\n    def start_node(self) -> None:\n        \"\"\"\n        Start the ROS2 node and verify it launched successfully.\n    \n        If \"skip \/ SKIP\" is found in the node_command, the node is not started.\n    \n        Raises:\n            RuntimeError: If the node fails to start or register with ROS2.\n        \"\"\"\n        logger.info(\"Starting the ROS2 node...\")\n        if \"skip\" in self.node_command.lower():\n            logger.info(\"Skipping node start as requested.\")\n            return\n        else:\n            self.node_process = subprocess.Popen(\n                self.node_command,\n                shell=True,\n                executable=\"\/bin\/bash\",\n                stderr=subprocess.PIPE,\n                stdout=subprocess.PIPE,\n                text=True,\n            )\n    \n            # Wait briefly for node to initialize\n            time.sleep(2)\n    \n            # Check if process is still running\n            if self.node_process.poll() is not None:\n                # Process terminated - get error output\n                stdout, stderr = self.node_process.communicate()\n                error_msg = f\"Node process terminated immediately.\\nStdout: {stdout}\\nStderr: {stderr}\"\n>               raise RuntimeError(error_msg)\nE               RuntimeError: Node process terminated immediately.\nE               Stdout: [ros2run]: Process exited with failure 1\nE               \nE               Stderr: Traceback (most recent call last):\nE                 File \"\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node\", line 121, in <module>\nE                   main()\nE                 File \"\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node\", line 114, in main\nE                   node = NetworkScannerNode()\nE                 File \"\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node\", line 41, in __init__\nE                   qos_profile = QoSProfile(\nE                 File \"\/opt\/ros\/humble\/local\/lib\/python3.10\/dist-packages\/rclpy\/qos.py\", line 82, in __init__\nE                   raise InvalidQoSProfileException('History and\/or depth settings are required.')\nE               rclpy.qos.InvalidQoSProfileException: ('Invalid QoSProfile', 'History and\/or depth settings are required.')\n\n..\/codestral_ros2_gen\/src\/codestral_ros2_gen\/utils\/ros2_runner.py:79: RuntimeError\n=========================== short test summary info ============================\nERROR src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_node_running\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 passed, 1 error in 3.59s\n\nstderr:\n","iteration":18,"attempt":1}
{"attempt_time":115.2886343002,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1126,"total_tokens":4475,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2592328, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2592431, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2592493, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-253\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2592678, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-253\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2592818, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7717d68c71f0>\nnetwork_scanner_node = psutil.Process(pid=2592818, name='python3', status='sleeping', started='15:36:12')\nnetwork_status_client = (<rclpy.node.Node object at 0x7717d514d960>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743338175, nanosec=181312736), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7717d514d960>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743338175, nanosec=181312736), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.05s (0:01:21)\n\nstderr:\nProcess 2592328 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2592431 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2592493 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2592640 no longer exists\nProcess 2592678 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2592818 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":18,"attempt":2}
{"attempt_time":130.1158270836,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1129,"total_tokens":4478,"error":null,"iteration":18,"attempt":3}
{"attempt_time":130.0463852882,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1161,"total_tokens":4510,"error":null,"iteration":19,"attempt":1}
{"attempt_time":130.3484339714,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1097,"total_tokens":4446,"error":null,"iteration":20,"attempt":1}
{"attempt_time":119.7714374065,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1174,"total_tokens":4523,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.72s]\n.Child process PID: 2596127, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2596176, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2596284, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-257\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2596469, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-257\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2596563, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x712264644670>\nnetwork_scanner_node = psutil.Process(pid=2596563, name='python3', status='sleeping', started='15:44:38')\nnetwork_status_client = (<rclpy.node.Node object at 0x712262f59960>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.06s (0:01:25)\n\nstderr:\nProcess 2596127 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2596176 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2596284 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2596381 no longer exists\nProcess 2596469 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2596563 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":21,"attempt":1}
{"attempt_time":90.9395689964,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1135,"total_tokens":4484,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.56s]\n\nSummary: 1 package finished [0.71s]\n.Child process PID: 2596859, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2596908, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2597041, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-258\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2597209, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-258\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2597301, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7e8df86dad10>\nnetwork_scanner_node = psutil.Process(pid=2597301, name='python3', status='sleeping', started='15:46:13')\nnetwork_status_client = (<rclpy.node.Node object at 0x7e8df86da230>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743338776, nanosec=480857084), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7e8df86da230>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743338776, nanosec=480857084), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.06s (0:01:21)\n\nstderr:\nProcess 2596859 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2596908 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2597041 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2597130 no longer exists\nProcess 2597209 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2597301 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":21,"attempt":2}
{"attempt_time":115.446854353,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1146,"total_tokens":4495,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.56s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2597740, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2597771, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2597877, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-259\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2598041, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-259\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2598165, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7219c2a3ed10>\nnetwork_scanner_node = psutil.Process(pid=2598165, name='python3', status='sleeping', started='15:48:09')\nnetwork_status_client = (<rclpy.node.Node object at 0x7219c1369780>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743338891, nanosec=959493174), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7219c1369780>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743338891, nanosec=959493174), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.03s (0:01:21)\n\nstderr:\nProcess 2597740 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2597771 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2597877 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2597983 no longer exists\nProcess 2598041 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2598165 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":21,"attempt":3}
{"attempt_time":91.9485368729,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1214,"total_tokens":4563,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.63s]\n\nSummary: 1 package finished [0.81s]\n.Child process PID: 2598472, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2598510, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2598624, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-260\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2598808, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-260\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2598903, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7e29e5d42d10>\nnetwork_scanner_node = psutil.Process(pid=2598903, name='python3', status='sleeping', started='15:49:44')\nnetwork_status_client = (<rclpy.node.Node object at 0x7e29e5d40970>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743338986, nanosec=962166593), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7e29e5d40970>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743338986, nanosec=962166593), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 78.01s (0:01:18)\n\nstderr:\nProcess 2598472 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2598510 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2598624 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2598727 no longer exists\nProcess 2598808 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":21,"attempt":4}
{"attempt_time":115.8920366764,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1223,"total_tokens":4572,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.56s]\n\nSummary: 1 package finished [0.71s]\n.Child process PID: 2599308, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2599372, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2599439, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-261\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2599631, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-261\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2599769, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x721499c3ed10>\nnetwork_scanner_node = psutil.Process(pid=2599769, name='python3', status='sleeping', started='15:51:37')\nnetwork_status_client = (<rclpy.node.Node object at 0x721498569780>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743339099, nanosec=840212840), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x721498569780>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743339099, nanosec=840212840), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.05s (0:01:21)\n\nstderr:\nProcess 2599308 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2599372 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2599439 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2599579 no longer exists\nProcess 2599631 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2599769 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":21,"attempt":5}
{"attempt_time":91.8627719879,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1159,"total_tokens":4508,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2600050, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2600106, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2600185, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-262\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2600368, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-262\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2600505, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7b9967041060>\nnetwork_scanner_node = psutil.Process(pid=2600505, name='python3', status='sleeping', started='15:53:12')\nnetwork_status_client = (<rclpy.node.Node object at 0x7b99660e6080>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743339194, nanosec=802222542), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7b99660e6080>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743339194, nanosec=802222542), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.92s (0:01:17)\n\nstderr:\nProcess 2600050 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2600106 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2600185 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2600316 no longer exists\nProcess 2600368 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":21,"attempt":6}
{"attempt_time":38.2659056187,"success":false,"final_state":"TEST","tests_passed":1,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1183,"total_tokens":4532,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.61s]\n\nSummary: 1 package finished [0.80s]\n.E\n==================================== ERRORS ====================================\n_________________ ERROR at setup of TestFull.test_node_running _________________\n\nrequest = <SubRequest 'network_scanner_node' for <Function test_node_running>>\ntmp_path = PosixPath('\/tmp\/pytest-of-aleev\/pytest-263\/test_node_running0')\nmonkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x772cecb9c820>\n\n    @pytest.fixture(scope=\"function\")\n    def network_scanner_node(request, tmp_path, monkeypatch):\n        \"\"\"Fixture that sets up a network scanner node with the provided parameters.\"\"\"\n        if not rclpy.ok():\n            rclpy.init()\n    \n        # Default parameters\n        network = \"4.2.2.2\"\n        scan_period = 3\n        mock_nscan = False\n        mock_nscan_text = \"\"\"#!\/bin\/bash\n        echo \"NSCAN\"\n        \"\"\"\n        if hasattr(request, \"param\"):\n            params = request.param\n            network = params.get(\"network\", network)\n            scan_period = params.get(\"scan_period\", scan_period)\n            mock_nscan = params.get(\"mock_nscan\", mock_nscan)\n            mock_nscan_text = params.get(\"mock_nscan_text\", mock_nscan_text)\n    \n        if mock_nscan:\n            print(\"Using mock nscan binary\")\n            nscan_path = os.path.join(tmp_path, \"nscan\")\n            with open(nscan_path, \"w\") as f:\n                f.write(mock_nscan_text)\n            os.chmod(nscan_path, 0o755)\n    \n            monkeypatch.setenv(\"PATH\", f\"{tmp_path}:{os.environ.get('PATH')}\")\n            print(f\"nscan path: {nscan_path}\")\n    \n        runner = ros2_runner.ROS2Runner(\n            node_command=f\"ros2 run network_scanner scanner_node --ros-args -p network:={network!r} -p scan_period:={scan_period}\",\n            test_command=\"\",\n        )\n>       runner.start_node()\n\nsrc\/network_scanner\/test\/test_scanner_node.py:46: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <codestral_ros2_gen.utils.ros2_runner.ROS2Runner object at 0x772cecb9f8e0>\n\n    def start_node(self) -> None:\n        \"\"\"\n        Start the ROS2 node and verify it launched successfully.\n    \n        If \"skip \/ SKIP\" is found in the node_command, the node is not started.\n    \n        Raises:\n            RuntimeError: If the node fails to start or register with ROS2.\n        \"\"\"\n        logger.info(\"Starting the ROS2 node...\")\n        if \"skip\" in self.node_command.lower():\n            logger.info(\"Skipping node start as requested.\")\n            return\n        else:\n            self.node_process = subprocess.Popen(\n                self.node_command,\n                shell=True,\n                executable=\"\/bin\/bash\",\n                stderr=subprocess.PIPE,\n                stdout=subprocess.PIPE,\n                text=True,\n            )\n    \n            # Wait briefly for node to initialize\n            time.sleep(2)\n    \n            # Check if process is still running\n            if self.node_process.poll() is not None:\n                # Process terminated - get error output\n                stdout, stderr = self.node_process.communicate()\n                error_msg = f\"Node process terminated immediately.\\nStdout: {stdout}\\nStderr: {stderr}\"\n>               raise RuntimeError(error_msg)\nE               RuntimeError: Node process terminated immediately.\nE               Stdout: [ros2run]: Process exited with failure 1\nE               \nE               Stderr: Traceback (most recent call last):\nE                 File \"\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node\", line 9, in <module>\nE                   from rclpy.exceptions import ParameterNotDeclaredException, ParameterValueException\nE               ImportError: cannot import name 'ParameterValueException' from 'rclpy.exceptions' (\/opt\/ros\/humble\/local\/lib\/python3.10\/dist-packages\/rclpy\/exceptions.py)\n\n..\/codestral_ros2_gen\/src\/codestral_ros2_gen\/utils\/ros2_runner.py:79: RuntimeError\n=========================== short test summary info ============================\nERROR src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_node_running\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 passed, 1 error in 3.58s\n\nstderr:\n","iteration":21,"attempt":7}
{"attempt_time":115.5235228539,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1204,"total_tokens":4553,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2601233, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2601294, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2601372, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-264\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2601555, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-264\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2601691, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7b1830b3d030>\nnetwork_scanner_node = psutil.Process(pid=2601691, name='python3', status='sleeping', started='15:55:42')\nnetwork_status_client = (<rclpy.node.Node object at 0x7b1830b3f520>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743339345, nanosec=528038809), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7b1830b3f520>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743339345, nanosec=528038809), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.04s (0:01:21)\n\nstderr:\nProcess 2601233 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2601294 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2601372 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2601507 no longer exists\nProcess 2601555 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2601691 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":21,"attempt":8}
{"attempt_time":119.7148265839,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1174,"total_tokens":4523,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.61s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2602080, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2602171, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2602241, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-265\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2602421, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-265\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2602565, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x71b707842d10>\nnetwork_scanner_node = psutil.Process(pid=2602565, name='python3', status='sleeping', started='15:57:38')\nnetwork_status_client = (<rclpy.node.Node object at 0x71b707840d30>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2602080 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2602171 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2602241 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2602383 no longer exists\nProcess 2602421 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2602565 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":21,"attempt":9}
{"attempt_time":3.3382518291,"success":false,"final_state":"PARSE","tests_passed":0,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":498,"total_tokens":3847,"error":"Parsing failed, no code returned.","iteration":21,"attempt":10}
{"attempt_time":119.7517983913,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1192,"total_tokens":4541,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2602976, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2603063, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2603132, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-266\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2603314, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-266\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2603454, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x733d2cf3f310>\nnetwork_scanner_node = psutil.Process(pid=2603454, name='python3', status='sleeping', started='15:59:41')\nnetwork_status_client = (<rclpy.node.Node object at 0x733d2b7a9c60>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.03s (0:01:25)\n\nstderr:\nProcess 2602976 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2603063 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2603132 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2603274 no longer exists\nProcess 2603314 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2603454 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":21,"attempt":11}
{"attempt_time":105.3583812714,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1219,"total_tokens":4568,"error":null,"iteration":21,"attempt":12}
{"attempt_time":112.1069705486,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1090,"total_tokens":4439,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2604688, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2604722, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2604831, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-268\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2604994, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-268\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2605117, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x794dad44ed10>\nnetwork_scanner_node = psutil.Process(pid=2605117, name='python3', status='sleeping', started='16:03:26')\nnetwork_status_client = (<rclpy.node.Node object at 0x794dac53d990>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743339808, nanosec=983791810), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x794dac53d990>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743339808, nanosec=983791810), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.92s (0:01:17)\n\nstderr:\nProcess 2604688 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2604722 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2604831 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2604940 no longer exists\nProcess 2604994 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":22,"attempt":1}
{"attempt_time":94.9760260582,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1102,"total_tokens":4451,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2605428, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2605466, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2605576, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-269\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2605740, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-269\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2605856, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x73c6a6a40640>\nnetwork_scanner_node = psutil.Process(pid=2605856, name='python3', status='sleeping', started='16:05:01')\nnetwork_status_client = (<rclpy.node.Node object at 0x73c6a6a408e0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743339903, nanosec=989719692), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x73c6a6a408e0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743339903, nanosec=989719692), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.95s (0:01:17)\n\nstderr:\nProcess 2605428 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2605466 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2605576 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2605681 no longer exists\nProcess 2605740 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":22,"attempt":2}
{"attempt_time":115.8546075821,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1231,"total_tokens":4580,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2606257, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2606332, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2606397, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-270\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2606585, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-270\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2606727, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x78748dde8580>\nnetwork_scanner_node = psutil.Process(pid=2606727, name='python3', status='sleeping', started='16:06:54')\nnetwork_status_client = (<rclpy.node.Node object at 0x78748dde8c70>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743340016, nanosec=767076622), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x78748dde8c70>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743340016, nanosec=767076622), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.02s (0:01:21)\n\nstderr:\nProcess 2606257 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2606332 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2606397 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2606538 no longer exists\nProcess 2606585 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2606727 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":22,"attempt":3}
{"attempt_time":107.3890862465,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1200,"total_tokens":4549,"error":null,"iteration":22,"attempt":4}
{"attempt_time":119.7549066544,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1178,"total_tokens":4527,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2608028, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2608065, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2608176, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-272\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2608341, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-272\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2608455, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7deb99f3ed40>\nnetwork_scanner_node = psutil.Process(pid=2608455, name='python3', status='sleeping', started='16:10:37')\nnetwork_status_client = (<rclpy.node.Node object at 0x7deb98776290>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.05s (0:01:25)\n\nstderr:\nProcess 2608028 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2608065 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2608176 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2608281 no longer exists\nProcess 2608341 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2608455 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":23,"attempt":1}
{"attempt_time":87.8536186218,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1130,"total_tokens":4479,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2608758, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2608805, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2608919, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-273\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2609104, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-273\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2609201, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7ba00b639030>\nnetwork_scanner_node = psutil.Process(pid=2609201, name='python3', status='sleeping', started='16:12:12')\nnetwork_status_client = (<rclpy.node.Node object at 0x7ba00b63b520>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743340334, nanosec=922975179), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7ba00b63b520>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743340334, nanosec=922975179), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.96s (0:01:17)\n\nstderr:\nProcess 2608758 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2608805 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2608919 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2609018 no longer exists\nProcess 2609104 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":23,"attempt":2}
{"attempt_time":115.8232700825,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1146,"total_tokens":4495,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.78s]\n.Child process PID: 2609601, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2609664, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2609743, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-274\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2609924, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-274\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2610058, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x783d547e8580>\nnetwork_scanner_node = psutil.Process(pid=2610058, name='python3', status='sleeping', started='16:14:04')\nnetwork_status_client = (<rclpy.node.Node object at 0x783d538b1d20>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743340447, nanosec=647838405), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x783d538b1d20>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743340447, nanosec=647838405), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.09s (0:01:21)\n\nstderr:\nProcess 2609601 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2609664 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2609743 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2609875 no longer exists\nProcess 2609924 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2610058 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":23,"attempt":3}
{"attempt_time":108.4467658997,"success":false,"final_state":"TEST","tests_passed":8,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1107,"total_tokens":4456,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2610370, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2610403, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2610501, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-275\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2610673, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-275\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2610799, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-275\/test_outdated_json_results_net0\/nscan\nChild process PID: 2610858, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nF\n=================================== FAILURES ===================================\n__________ TestFull.test_outdated_json_results[network_scanner_node0] __________\n\nself = <test_scanner_node.TestFull object at 0x785c8ed34d30>\nnetwork_scanner_node = psutil.Process(pid=2610858, status='terminated', started='16:15:48')\nnetwork_status_client = (<rclpy.node.Node object at 0x785c8d574b20>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_outdated_json_results(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON result file is older than 20 seconds,\n        the scanner node publishes a message with an empty addresses list.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        # Create outdated JSON file - will check from the first scan\n        data = {\"7.7.7.7\": {\"state\": \"UP\", \"response_time_ms\": 15, \"error\": None}}\n        with open(json_file_path, \"w\") as f:\n            json.dump(data, f)\n    \n        # Backdate the modification time by 20 seconds\n        old_time = time.time() - 20\n        os.utime(json_file_path, (old_time, old_time))\n    \n        client_node, received_msgs = network_status_client\n>       assert wait_for_messages(\n            client_node, received_msgs, count=3, timeout=10\n        ), \"Did not receive at least 3 messages in time\"\nE       AssertionError: Did not receive at least 3 messages in time\nE       assert False\nE        +  where False = wait_for_messages(<rclpy.node.Node object at 0x785c8d574b20>, [], count=3, timeout=10)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:335: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_outdated_json_results[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 8 passed in 94.62s (0:01:34)\n\nstderr:\nProcess 2610370 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2610403 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2610501 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2610625 no longer exists\nProcess 2610673 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":23,"attempt":4}
{"attempt_time":127.481846571,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1091,"total_tokens":4440,"error":null,"iteration":23,"attempt":5}
{"attempt_time":112.4682347775,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1111,"total_tokens":4460,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.72s]\n.Child process PID: 2612231, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2612303, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2612400, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-277\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2612589, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-277\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2612696, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x703295138fd0>\nnetwork_scanner_node = psutil.Process(pid=2612696, name='python3', status='sleeping', started='16:19:56')\nnetwork_status_client = (<rclpy.node.Node object at 0x70329513b0d0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743340799, nanosec=182933788), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x70329513b0d0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743340799, nanosec=182933788), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.94s (0:01:17)\n\nstderr:\nProcess 2612231 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2612303 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2612400 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2612533 no longer exists\nProcess 2612589 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":24,"attempt":1}
{"attempt_time":102.1153550148,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1165,"total_tokens":4514,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2612974, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2613046, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2613135, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-278\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2613322, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-278\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2613436, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7988261ead10>\nnetwork_scanner_node = psutil.Process(pid=2613436, name='python3', status='sleeping', started='16:21:31')\nnetwork_status_client = (<rclpy.node.Node object at 0x7988252b1e70>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2612974 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2613046 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2613135 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2613284 no longer exists\nProcess 2613322 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2613436 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":24,"attempt":2}
{"attempt_time":116.0133900642,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1226,"total_tokens":4575,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.78s]\n.Child process PID: 2613846, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2613920, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2614026, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-279\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2614219, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-279\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2614323, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x79d4f1d471f0>\nnetwork_scanner_node = psutil.Process(pid=2614323, name='python3', status='sleeping', started='16:23:31')\nnetwork_status_client = (<rclpy.node.Node object at 0x79d4f05ade10>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743341014, nanosec=290810513), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x79d4f05ade10>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743341014, nanosec=290810513), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.05s (0:01:21)\n\nstderr:\nProcess 2613846 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2613920 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2614026 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2614153 no longer exists\nProcess 2614219 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2614323 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":24,"attempt":3}
{"attempt_time":94.9492590427,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1184,"total_tokens":4533,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2614604, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2614673, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2614766, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-280\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2614950, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-280\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2615066, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7c3276f3c670>\nnetwork_scanner_node = psutil.Process(pid=2615066, name='python3', status='sleeping', started='16:25:06')\nnetwork_status_client = (<rclpy.node.Node object at 0x7c32757a1840>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743341109, nanosec=273733519), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7c32757a1840>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743341109, nanosec=273733519), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.03s (0:01:21)\n\nstderr:\nProcess 2614604 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2614673 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2614766 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2614914 no longer exists\nProcess 2614950 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2615066 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":24,"attempt":4}
{"attempt_time":119.7429475784,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1162,"total_tokens":4511,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.56s]\n\nSummary: 1 package finished [0.71s]\n.Child process PID: 2615461, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2615516, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2615638, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-281\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2615826, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-281\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2615907, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7d8f4b5e4580>\nnetwork_scanner_node = psutil.Process(pid=2615907, name='python3', status='sleeping', started='16:27:02')\nnetwork_status_client = (<rclpy.node.Node object at 0x7d8f4a6ad960>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2615461 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2615516 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2615638 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2615743 no longer exists\nProcess 2615826 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2615907 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":24,"attempt":5}
{"attempt_time":90.9369020462,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1133,"total_tokens":4482,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.62s]\n\nSummary: 1 package finished [0.80s]\n.Child process PID: 2616205, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2616262, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2616374, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-282\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2616566, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-282\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2616648, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x75873bd3c670>\nnetwork_scanner_node = psutil.Process(pid=2616648, name='python3', status='sleeping', started='16:28:37')\nnetwork_status_client = (<rclpy.node.Node object at 0x75873a5a1930>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743341320, nanosec=9440566), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x75873a5a1930>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743341320, nanosec=9440566), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.04s (0:01:21)\n\nstderr:\nProcess 2616205 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2616262 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2616374 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2616486 no longer exists\nProcess 2616566 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2616648 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":24,"attempt":6}
{"attempt_time":38.2010631561,"success":false,"final_state":"TEST","tests_passed":1,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1219,"total_tokens":4568,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.56s]\n\nSummary: 1 package finished [0.72s]\n.E\n==================================== ERRORS ====================================\n_________________ ERROR at setup of TestFull.test_node_running _________________\n\nrequest = <SubRequest 'network_scanner_node' for <Function test_node_running>>\ntmp_path = PosixPath('\/tmp\/pytest-of-aleev\/pytest-283\/test_node_running0')\nmonkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x714f28039450>\n\n    @pytest.fixture(scope=\"function\")\n    def network_scanner_node(request, tmp_path, monkeypatch):\n        \"\"\"Fixture that sets up a network scanner node with the provided parameters.\"\"\"\n        if not rclpy.ok():\n            rclpy.init()\n    \n        # Default parameters\n        network = \"4.2.2.2\"\n        scan_period = 3\n        mock_nscan = False\n        mock_nscan_text = \"\"\"#!\/bin\/bash\n        echo \"NSCAN\"\n        \"\"\"\n        if hasattr(request, \"param\"):\n            params = request.param\n            network = params.get(\"network\", network)\n            scan_period = params.get(\"scan_period\", scan_period)\n            mock_nscan = params.get(\"mock_nscan\", mock_nscan)\n            mock_nscan_text = params.get(\"mock_nscan_text\", mock_nscan_text)\n    \n        if mock_nscan:\n            print(\"Using mock nscan binary\")\n            nscan_path = os.path.join(tmp_path, \"nscan\")\n            with open(nscan_path, \"w\") as f:\n                f.write(mock_nscan_text)\n            os.chmod(nscan_path, 0o755)\n    \n            monkeypatch.setenv(\"PATH\", f\"{tmp_path}:{os.environ.get('PATH')}\")\n            print(f\"nscan path: {nscan_path}\")\n    \n        runner = ros2_runner.ROS2Runner(\n            node_command=f\"ros2 run network_scanner scanner_node --ros-args -p network:={network!r} -p scan_period:={scan_period}\",\n            test_command=\"\",\n        )\n>       runner.start_node()\n\nsrc\/network_scanner\/test\/test_scanner_node.py:46: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <codestral_ros2_gen.utils.ros2_runner.ROS2Runner object at 0x714f28039480>\n\n    def start_node(self) -> None:\n        \"\"\"\n        Start the ROS2 node and verify it launched successfully.\n    \n        If \"skip \/ SKIP\" is found in the node_command, the node is not started.\n    \n        Raises:\n            RuntimeError: If the node fails to start or register with ROS2.\n        \"\"\"\n        logger.info(\"Starting the ROS2 node...\")\n        if \"skip\" in self.node_command.lower():\n            logger.info(\"Skipping node start as requested.\")\n            return\n        else:\n            self.node_process = subprocess.Popen(\n                self.node_command,\n                shell=True,\n                executable=\"\/bin\/bash\",\n                stderr=subprocess.PIPE,\n                stdout=subprocess.PIPE,\n                text=True,\n            )\n    \n            # Wait briefly for node to initialize\n            time.sleep(2)\n    \n            # Check if process is still running\n            if self.node_process.poll() is not None:\n                # Process terminated - get error output\n                stdout, stderr = self.node_process.communicate()\n                error_msg = f\"Node process terminated immediately.\\nStdout: {stdout}\\nStderr: {stderr}\"\n>               raise RuntimeError(error_msg)\nE               RuntimeError: Node process terminated immediately.\nE               Stdout: [ros2run]: Process exited with failure 1\nE               \nE               Stderr: Traceback (most recent call last):\nE                 File \"\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node\", line 10, in <module>\nE                   from rclpy.exceptions import ParameterValueException\nE               ImportError: cannot import name 'ParameterValueException' from 'rclpy.exceptions' (\/opt\/ros\/humble\/local\/lib\/python3.10\/dist-packages\/rclpy\/exceptions.py)\n\n..\/codestral_ros2_gen\/src\/codestral_ros2_gen\/utils\/ros2_runner.py:79: RuntimeError\n=========================== short test summary info ============================\nERROR src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_node_running\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 passed, 1 error in 3.59s\n\nstderr:\n","iteration":24,"attempt":7}
{"attempt_time":119.4233953953,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1132,"total_tokens":4481,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2617394, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2617469, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2617591, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-284\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2617784, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-284\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2617862, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7e114993ed10>\nnetwork_scanner_node = psutil.Process(pid=2617862, name='python3', status='sleeping', started='16:31:11')\nnetwork_status_client = (<rclpy.node.Node object at 0x7e114993c640>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2617394 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2617469 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2617591 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2617702 no longer exists\nProcess 2617784 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2617862 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":24,"attempt":8}
{"attempt_time":112.0662062168,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1063,"total_tokens":4412,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2618292, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2618340, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2618474, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-285\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2618638, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-285\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2618739, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x71dcb79e4670>\nnetwork_scanner_node = psutil.Process(pid=2618739, name='python3', status='sleeping', started='16:33:10')\nnetwork_status_client = (<rclpy.node.Node object at 0x71dcb6acdf30>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743341592, nanosec=814059441), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x71dcb6acdf30>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743341592, nanosec=814059441), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.97s (0:01:17)\n\nstderr:\nProcess 2618292 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2618340 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2618474 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2618559 no longer exists\nProcess 2618638 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":24,"attempt":9}
{"attempt_time":98.0289473534,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1115,"total_tokens":4464,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2619036, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2619089, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2619212, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-286\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2619405, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-286\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2619483, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7d7b50244580>\nnetwork_scanner_node = psutil.Process(pid=2619483, name='python3', status='sleeping', started='16:34:45')\nnetwork_status_client = (<rclpy.node.Node object at 0x7d7b50246ef0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743341687, nanosec=809666532), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7d7b50246ef0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743341687, nanosec=809666532), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.03s (0:01:21)\n\nstderr:\nProcess 2619036 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2619089 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2619212 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2619322 no longer exists\nProcess 2619405 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2619483 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":24,"attempt":10}
{"attempt_time":115.4174520969,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1114,"total_tokens":4463,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.72s]\n.Child process PID: 2619906, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2619954, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2620054, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-287\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2620235, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-287\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2620349, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7c11eb8dad10>\nnetwork_scanner_node = psutil.Process(pid=2620349, name='python3', status='sleeping', started='16:36:40')\nnetwork_status_client = (<rclpy.node.Node object at 0x7c11ea1a5e40>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743341803, nanosec=230108382), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7c11ea1a5e40>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743341803, nanosec=230108382), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.05s (0:01:21)\n\nstderr:\nProcess 2619906 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2619954 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2620054 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2620159 no longer exists\nProcess 2620235 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2620349 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":24,"attempt":11}
{"attempt_time":91.8311443329,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1124,"total_tokens":4473,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2620642, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2620699, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2620826, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-288\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2620995, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-288\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2621097, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x714063740580>\nnetwork_scanner_node = psutil.Process(pid=2621097, name='python3', status='sleeping', started='16:38:15')\nnetwork_status_client = (<rclpy.node.Node object at 0x714061fa1840>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743341898, nanosec=174426363), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x714061fa1840>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743341898, nanosec=174426363), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.92s (0:01:17)\n\nstderr:\nProcess 2620642 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2620699 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2620826 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2620918 no longer exists\nProcess 2620995 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":24,"attempt":12}
{"attempt_time":115.6471066475,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1177,"total_tokens":4526,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.55s]\n\nSummary: 1 package finished [0.72s]\n.Child process PID: 2621509, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2621617, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2621710, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-289\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2621885, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-289\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2622010, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7131d1fead10>\nnetwork_scanner_node = psutil.Process(pid=2622010, name='python3', status='sleeping', started='16:40:08')\nnetwork_status_client = (<rclpy.node.Node object at 0x7131d10b1d20>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743342010, nanosec=741725429), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7131d10b1d20>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743342010, nanosec=741725429), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.06s (0:01:21)\n\nstderr:\nProcess 2621509 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2621617 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2621710 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2621830 no longer exists\nProcess 2621885 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2622010 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":24,"attempt":13}
{"attempt_time":94.9070718288,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1207,"total_tokens":4556,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.62s]\n\nSummary: 1 package finished [0.80s]\n.Child process PID: 2622317, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2622364, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2622458, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-290\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2622640, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-290\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2622760, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x737a060db310>\nnetwork_scanner_node = psutil.Process(pid=2622760, name='python3', status='sleeping', started='16:41:43')\nnetwork_status_client = (<rclpy.node.Node object at 0x737a049a1f30>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743342105, nanosec=679368053), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x737a049a1f30>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743342105, nanosec=679368053), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.01s (0:01:21)\n\nstderr:\nProcess 2622317 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2622364 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2622458 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2622570 no longer exists\nProcess 2622640 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2622760 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":24,"attempt":14}
{"attempt_time":115.5318930149,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1157,"total_tokens":4506,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2623180, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2623235, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2623321, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-291\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2623506, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-291\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2623632, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x747a8a24ad40>\nnetwork_scanner_node = psutil.Process(pid=2623632, name='python3', status='sleeping', started='16:43:38')\nnetwork_status_client = (<rclpy.node.Node object at 0x747a8a248a30>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743342221, nanosec=237258289), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x747a8a248a30>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743342221, nanosec=237258289), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.00s (0:01:20)\n\nstderr:\nProcess 2623180 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2623235 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2623321 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2623452 no longer exists\nProcess 2623506 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2623632 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":24,"attempt":15}
{"attempt_time":95.00355196,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1200,"total_tokens":4549,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2623941, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2623978, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2624074, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-292\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2624263, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-292\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2624374, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x74799863c640>\nnetwork_scanner_node = psutil.Process(pid=2624374, name='python3', status='sleeping', started='16:45:13')\nnetwork_status_client = (<rclpy.node.Node object at 0x74799863e950>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743342316, nanosec=254563013), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x74799863e950>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743342316, nanosec=254563013), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.03s (0:01:21)\n\nstderr:\nProcess 2623941 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2623978 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2624074 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2624193 no longer exists\nProcess 2624263 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2624374 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":24,"attempt":16}
{"attempt_time":127.6340060234,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1113,"total_tokens":4462,"error":null,"iteration":24,"attempt":17}
{"attempt_time":62.4732046127,"success":false,"final_state":"TEST","tests_passed":2,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1203,"total_tokens":4552,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2625744, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2625788, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\nF\n=================================== FAILURES ===================================\n__ TestFull.test_network_scanner_parameters[network_scanner_node0-expected0] ___\n\nself = <test_scanner_node.TestFull object at 0x79eb74b38c40>\nnetwork_scanner_node = psutil.Process(pid=2625788, name='python3', status='sleeping', started='16:48:16')\nnetwork_status_client = (<rclpy.node.Node object at 0x79eb740fe410>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=...Time(sec=1743342506, nanosec=486162793), addresses=[network_scanner.msg.IPStatus(ip_address='8.8.8.8', status='UP')])])\nexpected = {'expected_interval': 3, 'expected_ip': ['8.8.8.8']}\n\n    @pytest.mark.order(3)\n    @pytest.mark.parametrize(\n        \"network_scanner_node,expected\",\n        [\n            (\n                {\"network\": \"8.8.8.8\", \"scan_period\": 3},\n                {\"expected_ip\": [\"8.8.8.8\"], \"expected_interval\": 3},\n            ),\n            (\n                {\"network\": \"1.1.1.1, 8.8.4.4\", \"scan_period\": 6},\n                {\"expected_ip\": [\"1.1.1.1\", \"8.8.4.4\"], \"expected_interval\": 6},\n            ),\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_network_scanner_parameters(\n        self, network_scanner_node, network_status_client, expected\n    ):\n        # Verify the node process is running\n        assert network_scanner_node.is_running(), \"Network scanner node is not running\"\n    \n        client_node, received_msgs = network_status_client\n    \n        # Wait for at least 2 messages\n        assert wait_for_messages(\n            client_node, received_msgs, count=2, timeout=20\n        ), f\"Timeout waiting for messages. Received: {len(received_msgs)}\"\n    \n        # Validate the content of the first two messages\n        for msg in received_msgs[:2]:\n            validate_message(msg, expected[\"expected_ip\"])\n    \n        # Calculate the interval using ROS timestamps\n        first_msg = received_msgs[0]\n        second_msg = received_msgs[1]\n    \n        interval = (second_msg.stamp.sec - first_msg.stamp.sec) + (\n            (second_msg.stamp.nanosec - first_msg.stamp.nanosec) * 1e-9\n        )\n    \n        # Allow 1 second of tolerance for the interval check\n>       assert (\n            abs(interval - expected[\"expected_interval\"]) < 1\n        ), f\"Interval {interval:.2f} sec, expected ~{expected['expected_interval']} sec\"\nE       AssertionError: Interval 5.99 sec, expected ~3 sec\nE       assert 2.990184149 < 1\nE        +  where 2.990184149 = abs((5.990184149 - 3))\n\nsrc\/network_scanner\/test\/test_scanner_node.py:179: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_network_scanner_parameters[network_scanner_node0-expected0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 2 passed in 27.69s\n\nstderr:\nProcess 2625744 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2625788 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":25,"attempt":1}
{"attempt_time":127.8037462234,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1130,"total_tokens":4479,"error":null,"iteration":25,"attempt":2}
{"attempt_time":112.4426221848,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1138,"total_tokens":4487,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2627155, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2627211, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2627330, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-296\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2627504, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-296\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2627609, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x79f9fb542d10>\nnetwork_scanner_node = psutil.Process(pid=2627609, name='python3', status='sleeping', started='16:52:27')\nnetwork_status_client = (<rclpy.node.Node object at 0x79f9f9da5e10>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743342749, nanosec=778491489), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x79f9f9da5e10>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743342749, nanosec=778491489), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.95s (0:01:17)\n\nstderr:\nProcess 2627155 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2627211 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2627330 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2627427 no longer exists\nProcess 2627504 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":26,"attempt":1}
{"attempt_time":98.025813818,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1126,"total_tokens":4475,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2627901, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2627958, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2628076, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-297\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2628252, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-297\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2628346, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x731adc73c640>\nnetwork_scanner_node = psutil.Process(pid=2628346, name='python3', status='sleeping', started='16:54:02')\nnetwork_status_client = (<rclpy.node.Node object at 0x731adc73c8e0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743342844, nanosec=755005164), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x731adc73c8e0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743342844, nanosec=755005164), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.01s (0:01:21)\n\nstderr:\nProcess 2627901 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2627958 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2628076 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2628183 no longer exists\nProcess 2628252 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2628346 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":26,"attempt":2}
{"attempt_time":115.4323894978,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1151,"total_tokens":4500,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2628767, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2628813, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2628916, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-298\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2629095, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-298\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2629211, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7a8e894ded10>\nnetwork_scanner_node = psutil.Process(pid=2629211, name='python3', status='sleeping', started='16:55:57')\nnetwork_status_client = (<rclpy.node.Node object at 0x7a8e894dc940>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743342960, nanosec=192206615), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7a8e894dc940>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743342960, nanosec=192206615), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.02s (0:01:21)\n\nstderr:\nProcess 2628767 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2628813 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2628916 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2629023 no longer exists\nProcess 2629095 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2629211 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":26,"attempt":3}
{"attempt_time":94.9632675648,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1143,"total_tokens":4492,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.62s]\n\nSummary: 1 package finished [0.80s]\n.Child process PID: 2629500, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2629558, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2629673, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-299\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2629852, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-299\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2629956, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x731c741e8580>\nnetwork_scanner_node = psutil.Process(pid=2629956, name='python3', status='sleeping', started='16:57:32')\nnetwork_status_client = (<rclpy.node.Node object at 0x731c732d1f90>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743343055, nanosec=180002208), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x731c732d1f90>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743343055, nanosec=180002208), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.02s (0:01:21)\n\nstderr:\nProcess 2629500 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2629558 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2629673 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2629776 no longer exists\nProcess 2629852 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2629956 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":26,"attempt":4}
{"attempt_time":116.4797270298,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1312,"total_tokens":4661,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2630381, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2630423, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2630530, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-300\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2630708, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-300\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2630816, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7141902db310>\nnetwork_scanner_node = psutil.Process(pid=2630816, name='python3', status='sleeping', started='16:59:29')\nnetwork_status_client = (<rclpy.node.Node object at 0x7141902daa70>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743343171, nanosec=675442265), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7141902daa70>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743343171, nanosec=675442265), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.02s (0:01:21)\n\nstderr:\nProcess 2630381 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2630423 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2630530 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2630638 no longer exists\nProcess 2630708 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2630816 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":26,"attempt":5}
{"attempt_time":98.8931648731,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1145,"total_tokens":4494,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2631115, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2631162, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2631288, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-301\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2631468, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-301\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2631560, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7d7fb6044580>\nnetwork_scanner_node = psutil.Process(pid=2631560, name='python3', status='sleeping', started='17:01:03')\nnetwork_status_client = (<rclpy.node.Node object at 0x7d7fb50f9c60>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 84.97s (0:01:24)\n\nstderr:\nProcess 2631115 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2631162 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2631288 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2631390 no longer exists\nProcess 2631468 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2631560 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":26,"attempt":6}
{"attempt_time":119.9592671394,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1156,"total_tokens":4505,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2632005, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2632052, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2632174, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-302\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2632341, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-302\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2632449, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7e9db2be8580>\nnetwork_scanner_node = psutil.Process(pid=2632449, name='python3', status='sleeping', started='17:03:03')\nnetwork_status_client = (<rclpy.node.Node object at 0x7e9db1cd1e40>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.03s (0:01:25)\n\nstderr:\nProcess 2632005 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2632052 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2632174 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2632271 no longer exists\nProcess 2632341 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2632449 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":26,"attempt":7}
{"attempt_time":94.9961349964,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1115,"total_tokens":4464,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.61s]\n\nSummary: 1 package finished [0.79s]\n.Child process PID: 2632741, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2632800, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2632916, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-303\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2633104, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-303\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2633194, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7ecaffa38fd0>\nnetwork_scanner_node = psutil.Process(pid=2633194, name='python3', status='sleeping', started='17:04:38')\nnetwork_status_client = (<rclpy.node.Node object at 0x7ecafe355d50>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.05s (0:01:25)\n\nstderr:\nProcess 2632741 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2632800 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2632916 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2633014 no longer exists\nProcess 2633104 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2633194 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":26,"attempt":8}
{"attempt_time":115.8068852425,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1228,"total_tokens":4577,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2633626, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2633685, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2633803, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-304\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2633985, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-304\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2634081, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x71a86a043310>\nnetwork_scanner_node = psutil.Process(pid=2634081, name='python3', status='sleeping', started='17:06:38')\nnetwork_status_client = (<rclpy.node.Node object at 0x71a8690fdc90>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743343601, nanosec=439261349), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x71a8690fdc90>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743343601, nanosec=439261349), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.03s (0:01:21)\n\nstderr:\nProcess 2633626 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2633685 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2633803 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2633899 no longer exists\nProcess 2633985 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2634081 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":26,"attempt":9}
{"attempt_time":109.4165110588,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1119,"total_tokens":4468,"error":null,"iteration":26,"attempt":10}
{"attempt_time":119.3929553032,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1151,"total_tokens":4500,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.62s]\n\nSummary: 1 package finished [0.79s]\n.Child process PID: 2635393, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2635480, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2635558, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-306\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2635740, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-306\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2635874, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7a972724ed10>\nnetwork_scanner_node = psutil.Process(pid=2635874, name='python3', status='sleeping', started='17:10:23')\nnetwork_status_client = (<rclpy.node.Node object at 0x7a972724c700>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.08s (0:01:25)\n\nstderr:\nProcess 2635393 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2635480 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2635558 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2635697 no longer exists\nProcess 2635740 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2635874 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":27,"attempt":1}
{"attempt_time":112.9923539162,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1145,"total_tokens":4494,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2636273, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2636360, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2636444, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-307\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2636625, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-307\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2636756, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7e87d5443310>\nnetwork_scanner_node = psutil.Process(pid=2636756, name='python3', status='sleeping', started='17:12:23')\nnetwork_status_client = (<rclpy.node.Node object at 0x7e87d44fd930>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743343946, nanosec=391319389), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7e87d44fd930>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743343946, nanosec=391319389), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 78.00s (0:01:18)\n\nstderr:\nProcess 2636273 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2636360 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2636444 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2636577 no longer exists\nProcess 2636625 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":27,"attempt":2}
{"attempt_time":110.4983913898,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1216,"total_tokens":4565,"error":null,"iteration":27,"attempt":3}
{"attempt_time":115.5917315483,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1190,"total_tokens":4539,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.56s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2637994, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2638034, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2638133, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-309\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2638311, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-309\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2638426, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x775e59794e80>\nnetwork_scanner_node = psutil.Process(pid=2638426, name='python3', status='sleeping', started='17:16:06')\nnetwork_status_client = (<rclpy.node.Node object at 0x775e58177250>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743344169, nanosec=433948828), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x775e58177250>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743344169, nanosec=433948828), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.03s (0:01:21)\n\nstderr:\nProcess 2637994 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2638034 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2638133 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2638261 no longer exists\nProcess 2638311 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2638426 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":28,"attempt":1}
{"attempt_time":98.9818043709,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1145,"total_tokens":4494,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.78s]\n.Child process PID: 2638734, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2638779, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2638895, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-310\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2639065, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-310\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2639181, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7600d9cd8670>\nnetwork_scanner_node = psutil.Process(pid=2639181, name='python3', status='sleeping', started='17:17:41')\nnetwork_status_client = (<rclpy.node.Node object at 0x7600d85a1e40>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.06s (0:01:25)\n\nstderr:\nProcess 2638734 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2638779 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2638895 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2638995 no longer exists\nProcess 2639065 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2639181 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":28,"attempt":2}
{"attempt_time":3.2249581814,"success":false,"final_state":"PARSE","tests_passed":0,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":486,"total_tokens":3835,"error":"Parsing failed, no code returned.","iteration":28,"attempt":3}
{"attempt_time":900.1301083565,"success":false,"final_state":"GENERATE","tests_passed":0,"tests_failed":0,"tests_skipped":0,"prompt_tokens":0,"completion_tokens":0,"total_tokens":0,"error":"API error: API error occurred: Status 504\n{\n  \"message\":\"The upstream server is timing out\",\n  \"request_id\":\"7258012e73c38c415810a33c89a21215\"\n}","iteration":28,"attempt":4}
{"attempt_time":119.2349481583,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1104,"total_tokens":4453,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.76s]\n.Child process PID: 2644513, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2644566, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2644651, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-311\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2644828, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-311\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2644960, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x76969033c640>\nnetwork_scanner_node = psutil.Process(pid=2644960, name='python3', status='sleeping', started='17:34:44')\nnetwork_status_client = (<rclpy.node.Node object at 0x76968eba1930>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.04s (0:01:25)\n\nstderr:\nProcess 2644513 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2644566 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2644651 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2644783 no longer exists\nProcess 2644828 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2644960 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":28,"attempt":5}
{"attempt_time":117.2253973484,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1244,"total_tokens":4593,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.55s]\n\nSummary: 1 package finished [0.71s]\n.Child process PID: 2645401, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2645455, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2645540, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-312\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2645715, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-312\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2645850, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x744f1f846d10>\nnetwork_scanner_node = psutil.Process(pid=2645850, name='python3', status='sleeping', started='17:36:45')\nnetwork_status_client = (<rclpy.node.Node object at 0x744f1e931ed0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743345408, nanosec=346713026), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x744f1e931ed0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743345408, nanosec=346713026), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.05s (0:01:21)\n\nstderr:\nProcess 2645401 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2645455 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2645540 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2645671 no longer exists\nProcess 2645715 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2645850 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":28,"attempt":6}
{"attempt_time":94.9691457748,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1211,"total_tokens":4560,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.79s]\n.Child process PID: 2646150, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2646197, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2646296, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-313\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2646472, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-313\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2646599, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x748de973ed10>\nnetwork_scanner_node = psutil.Process(pid=2646599, name='python3', status='sleeping', started='17:38:20')\nnetwork_status_client = (<rclpy.node.Node object at 0x748de7f9e080>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743345503, nanosec=331272043), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x748de7f9e080>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743345503, nanosec=331272043), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.03s (0:01:21)\n\nstderr:\nProcess 2646150 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2646197 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2646296 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2646421 no longer exists\nProcess 2646472 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2646599 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":28,"attempt":7}
{"attempt_time":115.5660800934,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1119,"total_tokens":4468,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.79s]\n.Child process PID: 2647080, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2647139, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2647218, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-314\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2647395, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-314\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2647532, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x72bc663cd060>\nnetwork_scanner_node = psutil.Process(pid=2647532, name='python3', status='sleeping', started='17:40:16')\nnetwork_status_client = (<rclpy.node.Node object at 0x72bc64ba5d20>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743345618, nanosec=928143108), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x72bc64ba5d20>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743345618, nanosec=928143108), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.04s (0:01:21)\n\nstderr:\nProcess 2647080 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2647139 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2647218 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2647347 no longer exists\nProcess 2647395 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2647532 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":28,"attempt":8}
{"attempt_time":94.9506034851,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1233,"total_tokens":4582,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.62s]\n\nSummary: 1 package finished [0.80s]\n.Child process PID: 2647828, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2647871, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2647955, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-315\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2648141, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-315\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2648271, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7ead9de39030>\nnetwork_scanner_node = psutil.Process(pid=2648271, name='python3', status='sleeping', started='17:41:51')\nnetwork_status_client = (<rclpy.node.Node object at 0x7ead9de3b400>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743345713, nanosec=929247307), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7ead9de3b400>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743345713, nanosec=929247307), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.03s (0:01:21)\n\nstderr:\nProcess 2647828 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2647871 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2647955 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2648088 no longer exists\nProcess 2648141 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2648271 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":28,"attempt":9}
{"attempt_time":115.7810721397,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1184,"total_tokens":4533,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2648685, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2648744, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2648823, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-316\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2649011, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-316\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2649142, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x77db7a0d9060>\nnetwork_scanner_node = psutil.Process(pid=2649142, name='python3', status='sleeping', started='17:43:47')\nnetwork_status_client = (<rclpy.node.Node object at 0x77db789a1990>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743345829, nanosec=719599903), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x77db789a1990>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743345829, nanosec=719599903), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.07s (0:01:21)\n\nstderr:\nProcess 2648685 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2648744 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2648823 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2648960 no longer exists\nProcess 2649011 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2649142 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":28,"attempt":10}
{"attempt_time":91.9385368824,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1123,"total_tokens":4472,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.58s]\n\nSummary: 1 package finished [0.73s]\n.Child process PID: 2649443, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2649484, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2649570, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-317\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2649757, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-317\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2649881, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x77c56de44640>\nnetwork_scanner_node = psutil.Process(pid=2649881, name='python3', status='sleeping', started='17:45:22')\nnetwork_status_client = (<rclpy.node.Node object at 0x77c56de44bb0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743345924, nanosec=758817254), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x77c56de44bb0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743345924, nanosec=758817254), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 78.03s (0:01:18)\n\nstderr:\nProcess 2649443 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2649484 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2649570 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2649702 no longer exists\nProcess 2649757 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":28,"attempt":11}
{"attempt_time":115.3922524452,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1127,"total_tokens":4476,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.78s]\n.Child process PID: 2650256, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2650346, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2650425, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-318\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2650608, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-318\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2650740, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x762e6ae42d10>\nnetwork_scanner_node = psutil.Process(pid=2650740, name='python3', status='sleeping', started='17:47:14')\nnetwork_status_client = (<rclpy.node.Node object at 0x762e6ae40910>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743346037, nanosec=94687527), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x762e6ae40910>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743346037, nanosec=94687527), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.00s (0:01:20)\n\nstderr:\nProcess 2650256 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2650346 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2650425 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2650563 no longer exists\nProcess 2650608 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2650740 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":28,"attempt":12}
{"attempt_time":94.9960672855,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1123,"total_tokens":4472,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2651022, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2651091, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2651165, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-319\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2651354, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-319\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2651488, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x76d275fe4580>\nnetwork_scanner_node = psutil.Process(pid=2651488, name='python3', status='sleeping', started='17:48:49')\nnetwork_status_client = (<rclpy.node.Node object at 0x76d2750b1c60>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743346132, nanosec=108081883), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x76d2750b1c60>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743346132, nanosec=108081883), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.05s (0:01:21)\n\nstderr:\nProcess 2651022 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2651091 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2651165 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2651302 no longer exists\nProcess 2651354 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2651488 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":28,"attempt":13}
{"attempt_time":115.6910357475,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1127,"total_tokens":4476,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.74s]\n.Child process PID: 2651865, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2651956, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2652027, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-320\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2652218, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-320\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2652350, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7b63f1c48580>\nnetwork_scanner_node = psutil.Process(pid=2652350, name='python3', status='sleeping', started='17:50:45')\nnetwork_status_client = (<rclpy.node.Node object at 0x7b63f1c48ac0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743346247, nanosec=821992578), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7b63f1c48ac0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743346247, nanosec=821992578), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.05s (0:01:21)\n\nstderr:\nProcess 2651865 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2651956 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2652027 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2652173 no longer exists\nProcess 2652218 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2652350 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":28,"attempt":14}
{"attempt_time":94.94789505,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1228,"total_tokens":4577,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.62s]\n\nSummary: 1 package finished [0.79s]\n.Child process PID: 2652609, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2652695, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2652769, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-321\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2652963, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-321\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2653091, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7c263734ad10>\nnetwork_scanner_node = psutil.Process(pid=2653091, name='python3', status='sleeping', started='17:52:20')\nnetwork_status_client = (<rclpy.node.Node object at 0x7c2635ba9810>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743346342, nanosec=794541419), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7c2635ba9810>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743346342, nanosec=794541419), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.02s (0:01:21)\n\nstderr:\nProcess 2652609 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2652695 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2652769 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2652912 no longer exists\nProcess 2652963 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2653091 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":28,"attempt":15}
{"attempt_time":127.8032841682,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1140,"total_tokens":4489,"error":null,"iteration":28,"attempt":16}
{"attempt_time":112.0908200741,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1080,"total_tokens":4429,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.61s]\n\nSummary: 1 package finished [0.79s]\n.Child process PID: 2654571, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2654663, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2654743, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-323\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2654924, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-323\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2655058, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x733d73a3ed10>\nnetwork_scanner_node = psutil.Process(pid=2655058, name='python3', status='sleeping', started='17:56:23')\nnetwork_status_client = (<rclpy.node.Node object at 0x733d72369de0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743346585, nanosec=780085275), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x733d72369de0>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743346585, nanosec=780085275), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.99s (0:01:17)\n\nstderr:\nProcess 2654571 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2654663 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2654743 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2654876 no longer exists\nProcess 2654924 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":29,"attempt":1}
{"attempt_time":102.0084619522,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1144,"total_tokens":4493,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.60s]\n\nSummary: 1 package finished [0.78s]\n.Child process PID: 2655350, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2655410, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2655489, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-324\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2655667, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-324\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2655807, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 0 messages:\nNode process status: sleeping\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7dd315e40640>\nnetwork_scanner_node = psutil.Process(pid=2655807, name='python3', status='sleeping', started='17:57:58')\nnetwork_status_client = (<rclpy.node.Node object at 0x7dd315e40a90>, [])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n        assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\n    \n        ros_node = network_scanner_node\n>       with pytest.raises(psutil.NoSuchProcess):\nE       Failed: DID NOT RAISE <class 'psutil.NoSuchProcess'>\n\nsrc\/network_scanner\/test\/test_scanner_node.py:301: Failed\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 85.02s (0:01:25)\n\nstderr:\nProcess 2655350 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2655410 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2655489 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2655617 no longer exists\nProcess 2655667 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2655807 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":29,"attempt":2}
{"attempt_time":112.3783049583,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1144,"total_tokens":4493,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.57s]\n\nSummary: 1 package finished [0.75s]\n.Child process PID: 2656211, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2656289, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2656364, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-325\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2656554, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-325\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2656681, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7e4ef1942d10>\nnetwork_scanner_node = psutil.Process(pid=2656681, name='python3', status='sleeping', started='17:59:57')\nnetwork_status_client = (<rclpy.node.Node object at 0x7e4ef1940a00>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743346800, nanosec=268984679), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7e4ef1940a00>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743346800, nanosec=268984679), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 77.96s (0:01:17)\n\nstderr:\nProcess 2656211 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2656289 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2656364 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2656503 no longer exists\nProcess 2656554 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nNo ROS2 node processes identified among children\n","iteration":29,"attempt":3}
{"attempt_time":98.0176801682,"success":false,"final_state":"TEST","tests_passed":7,"tests_failed":1,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1196,"total_tokens":4545,"error":"Tests failed. Logs:\nstdout:\nStarting >>> network_scanner\nFinished <<< network_scanner [0.59s]\n\nSummary: 1 package finished [0.77s]\n.Child process PID: 2656984, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=4.2.2.2', '-p', 'scan_period:=3']\n.Child process PID: 2657029, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=8.8.8.8', '-p', 'scan_period:=3']\nReceived 2 messages:\nMessage 0:\n  IP: 8.8.8.8, Status: UP\nMessage 1:\n  IP: 8.8.8.8, Status: UP\n.Child process PID: 2657109, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.1.1.1, 8.8.4.4', '-p', 'scan_period:=6']\nReceived 2 messages:\nMessage 0:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\nMessage 1:\n  IP: 1.1.1.1, Status: UP\n  IP: 8.8.4.4, Status: UP\n..Received 0 messages:\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-326\/test_no_overlapping_scans_netw0\/nscan\nChild process PID: 2657298, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.0.0.1', '-p', 'scan_period:=1']\n.Using mock nscan binary\nnscan path: \/tmp\/pytest-of-aleev\/pytest-326\/test_invalid_json_format_netwo0\/nscan\nChild process PID: 2657420, command: ['python3', '\/home\/aleev\/codestral_gen\/test_ws\/install\/network_scanner\/lib\/network_scanner\/scanner_node', '--ros-args', '-p', 'network:=1.2.3.4', '-p', 'scan_period:=2']\nReceived 1 messages:\nMessage 0:\nF\n=================================== FAILURES ===================================\n___________ TestFull.test_invalid_json_format[network_scanner_node0] ___________\n\nself = <test_scanner_node.TestFull object at 0x7c396f13f1f0>\nnetwork_scanner_node = psutil.Process(pid=2657420, name='python3', status='sleeping', started='18:01:32')\nnetwork_status_client = (<rclpy.node.Node object at 0x7c396d9a5c60>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743346895, nanosec=208469764), addresses=[])])\n\n    @pytest.mark.parametrize(\n        \"network_scanner_node\",\n        [\n            {\n                \"network\": \"1.2.3.4\",\n                \"scan_period\": 2,\n                \"mock_nscan\": True,\n            },\n        ],\n        indirect=[\"network_scanner_node\"],\n    )\n    def test_invalid_json_format(self, network_scanner_node, network_status_client):\n        \"\"\"\n        Test that when the JSON file format isn't valid.\n        \"\"\"\n        # Expected path for the JSON file produced by nscan\n        json_file_path = \"\/tmp\/nscan_results.json\"\n        if os.path.exists(json_file_path):\n            os.remove(json_file_path)\n    \n        with open(json_file_path, \"w\") as f:\n            f.buffer.write(b\"{malformed json content\")\n    \n        client_node, received_msgs = network_status_client\n        # timeout 4 to wait for process shuts down\n>       assert not wait_for_messages(\n            client_node, received_msgs, count=1, timeout=4\n        ), \"Expected no messages, but received one.\"\nE       AssertionError: Expected no messages, but received one.\nE       assert not True\nE        +  where True = wait_for_messages(<rclpy.node.Node object at 0x7c396d9a5c60>, [network_scanner.msg.NetworkStatus(stamp=builtin_interfaces.msg.Time(sec=1743346895, nanosec=208469764), addresses=[])], count=1, timeout=4)\n\nsrc\/network_scanner\/test\/test_scanner_node.py:296: AssertionError\n=========================== short test summary info ============================\nFAILED src\/network_scanner\/test\/test_scanner_node.py::TestFull::test_invalid_json_format[network_scanner_node0]\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n1 failed, 7 passed in 81.04s (0:01:21)\n\nstderr:\nProcess 2656984 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2657029 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2657109 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nShell process 2657244 no longer exists\nProcess 2657298 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\nProcess 2657420 did not terminate gracefully, force killing\nNo ROS2 node processes identified among children\n","iteration":29,"attempt":4}
{"attempt_time":129.398431778,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1210,"total_tokens":4559,"error":null,"iteration":29,"attempt":5}
{"attempt_time":3.3875033855,"success":false,"final_state":"PARSE","tests_passed":0,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":511,"total_tokens":3860,"error":"Parsing failed, no code returned.","iteration":30,"attempt":1}
{"attempt_time":130.6089143753,"success":true,"final_state":"SUCCESS","tests_passed":9,"tests_failed":0,"tests_skipped":0,"prompt_tokens":3349,"completion_tokens":1118,"total_tokens":4467,"error":null,"iteration":30,"attempt":2}
